# 域名配置管理说明

## 概述
为了方便统一管理图片域名，避免硬编码带来的维护困难，我们将所有域名相关配置集中到 `utils/domainConfig.js` 文件中。

## 配置文件位置
```
utils/domainConfig.js
```

## 主要功能

### 1. 域名映射修复
自动修复错误或过期的域名，确保图片正常加载：
```javascript
domainMap: {
    'jingle350.cn': 'jingle0350.cn',           // 修复域名错误
    'aly2.jingle0350.cn': 'aly22.jingle0350.cn'  // 修复子域名错误
}
```

### 2. 当前域名配置
设置当前使用的正确域名：
```javascript
correctDomain: 'aly22.jingle0350.cn'
```

### 3. 默认图片路径
统一管理默认图片路径：
```javascript
defaultImages: {
    'default': '/static/images/default.png',      // 默认图片
    'avatar': '/static/images/default-avatar.png', // 默认头像
    'video': '/static/images/default.png'         // 默认视频缩略图
}
```

## 如何换域名

### 方法一：简单域名替换
如果只是简单的域名更换，修改 `correctDomain` 字段：
```javascript
// 将域名从 aly22.jingle0350.cn 改为新域名
correctDomain: 'new.domain.com'
```

### 方法二：添加域名映射
如果需要兼容旧域名，在 `domainMap` 中添加映射：
```javascript
domainMap: {
    'jingle350.cn': 'jingle0350.cn',
    'aly2.jingle0350.cn': 'aly22.jingle0350.cn',
    'aly22.jingle0350.cn': 'new.domain.com',  // 新增映射
    'old.domain.com': 'new.domain.com'        // 新增映射
}
```

## 使用示例

### 在组件中使用
```javascript
import { fixImageUrl, getDefaultImage } from '@/utils/domainConfig.js'

// 修复图片URL
const correctedUrl = fixImageUrl(originalUrl)

// 获取默认图片
const defaultImg = getDefaultImage('avatar')
```

### 已应用的组件
- `components/articleItem/articleItem.vue` - 文章列表项组件

## 维护优势

1. **集中管理**：所有域名配置在一个文件中，便于维护
2. **批量修复**：自动修复历史数据中的错误域名
3. **向前兼容**：支持多个域名映射，保证旧数据正常显示
4. **易于扩展**：可以轻松添加新的域名映射规则
5. **统一接口**：提供统一的工具函数，降低使用复杂度

## 注意事项

1. 修改配置后需要重新编译项目
2. 建议在测试环境充分验证后再部署到生产环境
3. 如果有缓存，可能需要清除缓存才能看到效果
4. 建议保留旧域名映射一段时间，确保兼容性

## 扩展功能

配置文件还支持：
- 图片参数配置（压缩、格式转换等）
- 域名检查和验证
- 调试信息输出

如需使用这些功能，请参考 `domainConfig.js` 文件中的详细注释。