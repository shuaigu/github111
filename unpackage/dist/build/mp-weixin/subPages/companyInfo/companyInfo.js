"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("up-loading-page")()}const a={__name:"companyInfo",setup(a){const o=e.ref({name:"",slogan:"",address:"",phone:"",email:"",workTime:""}),n=e.ref(!0),l=e.ref(!1),t=async()=>{if(!o.value.name.trim())return e.index.showToast({title:"请输入公司名称",icon:"none"});if(o.value.phone&&!/^1[3-9]\d{9}$/.test(o.value.phone))return e.index.showToast({title:"请输入正确的手机号码",icon:"none"});if(o.value.email&&!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(o.value.email))return e.index.showToast({title:"请输入正确的邮箱地址",icon:"none"});try{l.value=!0;const a=e.nr.importObject("company",{customUI:!0});(await a.updateInfo(o.value)).success&&e.index.showToast({title:"保存成功",icon:"success"})}catch(a){e.index.showToast({title:a.message||"保存失败",icon:"none"})}finally{l.value=!1}};return e.onMounted((()=>{(async()=>{try{const a=e.nr.importObject("company",{customUI:!0}),l=await a.getInfo();l.success&&(o.value=l.data||o.value)}catch(a){e.index.showToast({title:a.message||"加载失败",icon:"none"})}finally{n.value=!1}})()})),(a,s)=>e.e({a:e.p({loading:n.value}),b:!n.value},n.value?{}:{c:o.value.name,d:e.o((e=>o.value.name=e.detail.value)),e:o.value.slogan,f:e.o((e=>o.value.slogan=e.detail.value)),g:o.value.address,h:e.o((e=>o.value.address=e.detail.value)),i:o.value.phone,j:e.o((e=>o.value.phone=e.detail.value)),k:o.value.email,l:e.o((e=>o.value.email=e.detail.value)),m:o.value.workTime,n:e.o((e=>o.value.workTime=e.detail.value)),o:e.t(l.value?"保存中...":"保存"),p:l.value,q:l.value,r:e.o(t)},{s:e.gei(a,"")})}},o=e._export_sfc(a,[["__scopeId","data-v-89ee46cc"]]);wx.createPage(o);
