"use strict";const e=require("../../common/vendor.js"),o=require("../../store/authSwitch.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const a={__name:"adminManage",setup(a){const n=o.useAuthSwitchStore(),t=e.nr.importObject("sendOn");e.onShow((()=>{(async()=>{try{e.index.showLoading({title:"获取按钮状态...",mask:!0});const o=await t.get();o&&o.data&&o.data.length>0?(i.value=void 0!==o.data[0].publishButton&&o.data[0].publishButton,l.value=void 0!==o.data[0].floatButton&&o.data[0].floatButton,s.value=void 0!==o.data[0].avatarClick&&o.data[0].avatarClick,c.value=void 0!==o.data[0].commentVisibility&&o.data[0].commentVisibility,d.value=void 0!==o.data[0].lotteryVisibility&&o.data[0].lotteryVisibility,n.setAuthValue(!0),console.log("发布按钮状态:",i.value),console.log("悬浮按钮状态:",l.value),console.log("头像点击状态:",s.value),console.log("评论显示状态:",c.value),console.log("抽奖模块状态:",d.value)):(console.error("获取按钮状态失败: 数据格式不正确"),e.index.showToast({icon:"none",title:"获取按钮状态失败"}))}catch(o){console.error("获取按钮状态失败:",o),e.index.showToast({icon:"none",title:"获取按钮状态失败"})}finally{e.index.hideLoading()}})()}));const i=e.ref(!1),l=e.ref(!1),s=e.ref(!1),c=e.ref(!1),d=e.ref(!1),u=async o=>{o.stopPropagation();const a=o.detail.value;try{e.index.showLoading({title:"更新中...",mask:!0}),i.value=a;const o=await t.update(!0,a,l.value,s.value,c.value,d.value);console.log("发布按钮状态更新结果:",o),e.index.$emit("publishButtonChanged",a),e.index.showToast({icon:"success",title:a?"发布按钮已开启":"发布按钮已关闭",duration:2e3})}catch(n){console.error("更新发布按钮状态失败:",n),i.value=!a,e.index.showToast({icon:"error",title:"操作失败",duration:2e3})}finally{e.index.hideLoading()}},r=async o=>{o.stopPropagation();const a=o.detail.value;try{e.index.showLoading({title:"更新中...",mask:!0}),l.value=a;const o=await t.update(!0,i.value,a,s.value,c.value,d.value);console.log("悬浮按钮状态更新结果:",o),e.index.$emit("floatButtonChanged",a),e.index.showToast({icon:"success",title:a?"悬浮按钮已开启":"悬浮按钮已关闭",duration:2e3})}catch(n){console.error("更新悬浮按钮状态失败:",n),l.value=!a,e.index.showToast({icon:"error",title:"操作失败",duration:2e3})}finally{e.index.hideLoading()}},g=async o=>{o.stopPropagation();const a=o.detail.value;try{e.index.showLoading({title:"更新中...",mask:!0}),s.value=a;const o=await t.update(!0,i.value,l.value,a,c.value,d.value);console.log("头像点击状态更新结果:",o),e.index.$emit("avatarClickChanged",a),e.index.showToast({icon:"success",title:a?"头像点击已开启":"头像点击已关闭",duration:2e3})}catch(n){console.error("更新头像点击状态失败:",n),s.value=!a,e.index.showToast({icon:"error",title:"操作失败",duration:2e3})}finally{e.index.hideLoading()}},v=async o=>{o.stopPropagation();const a=o.detail.value;try{e.index.showLoading({title:"更新中...",mask:!0}),c.value=a;const o=await t.update(!0,i.value,l.value,s.value,a,d.value);console.log("评论显示状态更新结果:",o),e.index.$emit("commentVisibilityChanged",a),e.index.showToast({icon:"success",title:a?"评论功能已开启":"评论功能已关闭",duration:2e3})}catch(n){console.error("更新评论显示状态失败:",n),c.value=!a,e.index.showToast({icon:"error",title:"操作失败",duration:2e3})}finally{e.index.hideLoading()}},h=async o=>{o.stopPropagation();const a=o.detail.value;try{e.index.showLoading({title:"更新中...",mask:!0}),d.value=a;const o=await t.update(!0,i.value,l.value,s.value,c.value,a);console.log("抽奖模块显示状态更新结果:",o),e.index.$emit("lotteryVisibilityChanged",a),e.index.showToast({icon:"success",title:a?"抽奖模块已开启":"抽奖模块已关闭",duration:2e3})}catch(n){console.error("更新抽奖模块显示状态失败:",n),d.value=!a,e.index.showToast({icon:"error",title:"操作失败",duration:2e3})}finally{e.index.hideLoading()}};e.index.$on("publishButtonChanged",(e=>{console.log("收到发布按钮状态变化事件:",e),i.value=e})),e.index.$on("floatButtonChanged",(e=>{console.log("收到悬浮按钮状态变化事件:",e),l.value=e})),e.index.$on("avatarClickChanged",(e=>{console.log("收到头像点击状态变化事件:",e),s.value=e})),e.index.$on("commentVisibilityChanged",(e=>{console.log("收到评论显示状态变化事件:",e),c.value=e})),e.index.$on("lotteryVisibilityChanged",(e=>{console.log("收到抽奖模块显示状态变化事件:",e),d.value=e})),e.onUnmounted((()=>{e.index.$off("publishButtonChanged"),e.index.$off("floatButtonChanged"),e.index.$off("avatarClickChanged"),e.index.$off("commentVisibilityChanged"),e.index.$off("lotteryVisibilityChanged")}));const x=e.ref(["分类管理","文章管理","用户反馈","公司信息","悬浮按钮控制","发布按钮控制","头像点击控制","评论功能控制","抽奖模块控制","用户信息查询","抽奖管理"]);return(o,a)=>({a:e.f(x.value,((o,a,n)=>e.e({a:e.t(o),b:"发布按钮控制"===o},"发布按钮控制"===o?{c:i.value,d:e.o(u,o),e:e.o((()=>{}),o)}:"悬浮按钮控制"===o?{g:l.value,h:e.o(r,o),i:e.o((()=>{}),o)}:"头像点击控制"===o?{k:s.value,l:e.o(g,o),m:e.o((()=>{}),o)}:"评论功能控制"===o?{o:c.value,p:e.o(v,o),q:e.o((()=>{}),o)}:"抽奖模块控制"===o?{s:d.value,t:e.o(h,o),v:e.o((()=>{}),o)}:{},{f:"悬浮按钮控制"===o,j:"头像点击控制"===o,n:"评论功能控制"===o,r:"抽奖模块控制"===o,w:"ca07fc55-0-"+n,x:o,y:e.o((a=>(o=>{switch(o){case"分类管理":console.log("跳转分类管理"),e.index.navigateTo({url:"/subPages/cateManage/cateManage"});break;case"文章管理":console.log("跳转文章管理"),e.index.navigateTo({url:"/subPages/articleManage/articleManage"});break;case"用户反馈":console.log("跳转用户反馈"),e.index.navigateTo({url:"/subPages/feedManage/feedManage"});break;case"公司信息":console.log("跳转公司信息"),e.index.navigateTo({url:"/subPages/companyInfo/companyInfo"});break;case"悬浮按钮控制":console.log("点击悬浮按钮控制，不执行任何操作");break;case"发布按钮控制":console.log("点击发布按钮控制，不执行任何操作");break;case"头像点击控制":console.log("点击头像点击控制，不执行任何操作");break;case"评论功能控制":console.log("点击评论功能控制，不执行任何操作");break;case"用户信息查询":console.log("跳转用户信息查询"),e.index.navigateTo({url:"/subPages/userInfoQuery/userInfoQuery"});break;case"抽奖管理":console.log("跳转抽奖管理"),e.index.navigateTo({url:"/subPages/subChoujiang/subChoujiang"})}})(o)),o)}))),b:e.p({color:"#cccccc","custom-prefix":"iconfont",type:"icon-arrow-drop-right-line",size:"30"}),c:e.gei(o,"")})}},n=e._export_sfc(a,[["__scopeId","data-v-ca07fc55"]]);wx.createPage(n);
