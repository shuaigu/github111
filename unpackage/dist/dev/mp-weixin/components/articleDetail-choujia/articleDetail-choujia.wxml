<view class="{{['lottery-container', virtualHostClass]}}" style="{{virtualHostStyle}}" hidden="{{virtualHostHidden || false}}" id="{{r}}"><view class="lottery-header"><text class="lottery-title">评论区抽大奖</text><view class="lottery-subtitle"><text class="participants-count"><text class="count-number">{{a}}</text><text>人已参与</text><text wx:if="{{b}}" class="remaining-slots">，还剩{{c}}个名额</text></text></view></view><view class="user-grid"><view wx:for="{{d}}" wx:for-item="user" wx:key="h" class="{{['user-cell', user.i]}}"><view class="user-content"><image wx:if="{{user.a}}" class="user-avatar" src="{{user.b}}" mode="aspectFill"></image><view wx:else class="empty-avatar clickable" bindtap="{{user.c}}"><text>点击参与</text><text class="add-icon">+</text></view><text wx:if="{{user.d}}" class="user-nickname">{{user.e}}</text><text wx:elif="{{user.f}}" class="user-nickname">{{user.g}}</text><text wx:else class="user-nickname">等待参与</text><text class="user-probability">{{e}}%</text></view></view></view><view bindtap="{{g}}" class="{{['lottery-btn', h && 'rotating']}}"><text class="btn-text">{{f}}</text></view><view wx:if="{{i}}" class="result-popup"><view class="result-content"><view class="result-header">抽奖结果</view><view wx:if="{{j}}" class="lucky-users"><view class="lucky-users-title">恭喜幸运用户:</view><view class="prize-time">{{k}}</view><view class="lucky-user-item"><image class="lucky-user-avatar" src="{{l}}" mode="aspectFill"></image><view class="lucky-user-info"><view class="name-time-container"><text class="lucky-user-name">{{m}}</text><text wx:if="{{n}}" class="time">{{o}}</text></view></view></view></view><view class="probability-info"><view class="probability-title">本次抽奖概率分布</view><view class="probability-note">所有参与者概率相等: {{p}}%</view></view><button class="result-btn" bindtap="{{q}}">确定</button></view></view></view>