{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\n\texport default {\n\t\tonLaunch: function( ) {\n\t\t\tconsole.log( 'App Launch' )\n\t\t},\n\t\tonShow: function( ) {\n\t\t\tconsole.log( 'App Show' )\n\t\t},\n\t\tonHide: function( ) {\n\t\t\tconsole.log( 'App Hide' )\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t/*每个页面公共css */\n\t@import \"@/uni_modules/uview-plus/index.scss\";\n\t@import \"@/style/common.scss\";\n\t@import \"@/style/iconfont/iconfont.css\";\n</style>","import App from './App'\nimport uviewPlus from '@/uni_modules/uview-plus'\nimport { createPinia } from 'pinia'\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue( {\n\t...App\n} )\napp.$mount( )\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nimport { mount$u } from '@/uni_modules/uview-plus'\n\n// 自定义持久化插件函数\nconst createPersistedState = (options = {}) => {\n\tconst storage = {\n\t\tgetItem: (key) => uni.getStorageSync(key),\n\t\tsetItem: (key, value) => uni.setStorageSync(key, value)\n\t}\n\t\n\treturn ({ store }) => {\n\t\t// 判断当前store是否需要持久化\n\t\tif (!options.stores || options.stores.includes(store.$id)) {\n\t\t\tconst storageKey = `${options.prefix || 'pinia'}-${store.$id}`;\n\t\t\t\n\t\t\t// 从存储中恢复状态\n\t\t\tconst persisted = storage.getItem(storageKey);\n\t\t\tif (persisted) {\n\t\t\t\tstore.$patch(JSON.parse(persisted));\n\t\t\t}\n\t\t\t\n\t\t\t// 监听变更并保存\n\t\t\tstore.$subscribe((_, state) => {\n\t\t\t\tstorage.setItem(storageKey, JSON.stringify(state));\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function createApp( ) {\n\tconst app = createSSRApp( App )\n\tconst pinia = createPinia( )\n\t\n\t// 使用自定义持久化插件，可指定哪些store需要持久化\n\tpinia.use(createPersistedState({\n\t\t// 可选：指定哪些store需要持久化\n\t\tstores: ['userInfo', 'cart', 'settings'], // 示例，根据实际需求修改\n\t\t// 可选：存储前缀\n\t\tprefix: 'wx2-'\n\t}));\n\t\n\tapp.use( pinia )\n\n\t// 安装 uviewPlus\n\tapp.use( uviewPlus )\n\t\n\t// 挂载uview-plus\n\tmount$u()\n\t\n\treturn {\n\t\tapp,\n\t\tpinia\n\t}\n}\n// #endif"],"names":["uni","createSSRApp","App","createPinia","uviewPlus","mount$u"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACC,MAAK,YAAU;AAAA,EACd,UAAU,WAAY;AACrBA,kBAAAA,MAAA,MAAA,OAAA,gBAAa,YAAa;AAAA,EAC1B;AAAA,EACD,QAAQ,WAAY;AACnBA,kBAAAA,MAAY,MAAA,OAAA,gBAAC,UAAW;AAAA,EACxB;AAAA,EACD,QAAQ,WAAY;AACnBA,kBAAAA,MAAY,MAAA,OAAA,iBAAC,UAAW;AAAA,EACzB;AACD;ACSD,MAAM,uBAAuB,CAAC,UAAU,OAAO;AAC9C,QAAM,UAAU;AAAA,IACf,SAAS,CAAC,QAAQA,oBAAI,eAAe,GAAG;AAAA,IACxC,SAAS,CAAC,KAAK,UAAUA,cAAG,MAAC,eAAe,KAAK,KAAK;AAAA,EACtD;AAED,SAAO,CAAC,EAAE,YAAY;AAErB,QAAI,CAAC,QAAQ,UAAU,QAAQ,OAAO,SAAS,MAAM,GAAG,GAAG;AAC1D,YAAM,aAAa,GAAG,QAAQ,UAAU,OAAO,IAAI,MAAM,GAAG;AAG5D,YAAM,YAAY,QAAQ,QAAQ,UAAU;AAC5C,UAAI,WAAW;AACd,cAAM,OAAO,KAAK,MAAM,SAAS,CAAC;AAAA,MAClC;AAGD,YAAM,WAAW,CAAC,GAAG,UAAU;AAC9B,gBAAQ,QAAQ,YAAY,KAAK,UAAU,KAAK,CAAC;AAAA,MACrD,CAAI;AAAA,IACD;AAAA,EACD;AACF;AAEO,SAAS,YAAa;AAC5B,QAAM,MAAMC,cAAY,aAAEC,SAAK;AAC/B,QAAM,QAAQC,cAAAA,YAAc;AAG5B,QAAM,IAAI,qBAAqB;AAAA;AAAA,IAE9B,QAAQ,CAAC,YAAY,QAAQ,UAAU;AAAA;AAAA;AAAA,IAEvC,QAAQ;AAAA,EACR,CAAA,CAAC;AAEF,MAAI,IAAK,KAAO;AAGhB,MAAI,IAAKC,qCAAW;AAGpBC,sCAAS;AAET,SAAO;AAAA,IACN;AAAA,IACA;AAAA,EACA;AACF;;;"}