{"version":3,"file":"upload-image.js","sources":["uni_modules/uni-file-picker/components/uni-file-picker/upload-image.vue","../../软件/HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDov5Luj56CB5rWL6K-VL3d4Mi91bmlfbW9kdWxlcy91bmktZmlsZS1waWNrZXIvY29tcG9uZW50cy91bmktZmlsZS1waWNrZXIvdXBsb2FkLWltYWdlLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"uni-file-picker__container\">\n\t\t<view class=\"file-picker__box\" v-for=\"(item,index) in filesList\" :key=\"index\" :style=\"boxStyle\">\n\t\t\t<view class=\"file-picker__box-content\" :style=\"borderStyle\">\n\t\t\t\t<image class=\"file-image\" :src=\"item.url\" mode=\"aspectFill\" @click.stop=\"prviewImage(item,index)\"></image>\n\t\t\t\t<view v-if=\"delIcon && !readonly\" class=\"icon-del-box\" @click.stop=\"delFile(index)\">\n\t\t\t\t\t<view class=\"icon-del\"></view>\n\t\t\t\t\t<view class=\"icon-del rotate\"></view>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"(item.progress && item.progress !== 100) ||item.progress===0 \" class=\"file-picker__progress\">\n\t\t\t\t\t<progress class=\"file-picker__progress-item\" :percent=\"item.progress === -1?0:item.progress\" stroke-width=\"4\"\n\t\t\t\t\t :backgroundColor=\"item.errMsg?'#ff5a5f':'#EBEBEB'\" />\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"item.errMsg\" class=\"file-picker__mask\" @click.stop=\"uploadFiles(item,index)\">\n\t\t\t\t\t点击重试\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view v-if=\"filesList.length < limit && !readonly\" class=\"file-picker__box\" :style=\"boxStyle\">\n\t\t\t<view class=\"file-picker__box-content is-add\" :style=\"borderStyle\" @click=\"choose\">\n\t\t\t\t<slot>\n\t\t\t\t\t<view class=\"icon-add\"></view>\n\t\t\t\t\t<view class=\"icon-add rotate\"></view>\n\t\t\t\t</slot>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tname: \"uploadImage\",\n\t\temits:['uploadFiles','choose','delFile'],\n\t\tprops: {\n\t\t\tfilesList: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t},\n\t\t\tdisabled:{\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tdisablePreview: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tlimit: {\n\t\t\t\ttype: [Number, String],\n\t\t\t\tdefault: 9\n\t\t\t},\n\t\t\timageStyles: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\theight: 'auto',\n\t\t\t\t\t\tborder: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelIcon: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\treadonly:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:false\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tstyles() {\n\t\t\t\tlet styles = {\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\tborder: {}\n\t\t\t\t}\n\t\t\t\treturn Object.assign(styles, this.imageStyles)\n\t\t\t},\n\t\t\tboxStyle() {\n\t\t\t\tconst {\n\t\t\t\t\twidth = 'auto',\n\t\t\t\t\t\theight = 'auto'\n\t\t\t\t} = this.styles\n\t\t\t\tlet obj = {}\n\t\t\t\tif (height === 'auto') {\n\t\t\t\t\tif (width !== 'auto') {\n\t\t\t\t\t\tobj.height = this.value2px(width)\n\t\t\t\t\t\tobj['padding-top'] = 0\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj.height = 0\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tobj.height = this.value2px(height)\n\t\t\t\t\tobj['padding-top'] = 0\n\t\t\t\t}\n\n\t\t\t\tif (width === 'auto') {\n\t\t\t\t\tif (height !== 'auto') {\n\t\t\t\t\t\tobj.width = this.value2px(height)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj.width = '33.3%'\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tobj.width = this.value2px(width)\n\t\t\t\t}\n\n\t\t\t\tlet classles = ''\n\t\t\t\tfor(let i in obj){\n\t\t\t\t\tclassles+= `${i}:${obj[i]};`\n\t\t\t\t}\n\t\t\t\treturn classles\n\t\t\t},\n\t\t\tborderStyle() {\n\t\t\t\tlet {\n\t\t\t\t\tborder\n\t\t\t\t} = this.styles\n\t\t\t\tlet obj = {}\n\t\t\t\tconst widthDefaultValue = 1\n\t\t\t\tconst radiusDefaultValue = 3\n\t\t\t\tif (typeof border === 'boolean') {\n\t\t\t\t\tobj.border = border ? '1px #eee solid' : 'none'\n\t\t\t\t} else {\n\t\t\t\t\tlet width = (border && border.width) || widthDefaultValue\n\t\t\t\t\twidth = this.value2px(width)\n\t\t\t\t\tlet radius = (border && border.radius) || radiusDefaultValue\n\t\t\t\t\tradius = this.value2px(radius)\n\t\t\t\t\tobj = {\n\t\t\t\t\t\t'border-width': width,\n\t\t\t\t\t\t'border-style': (border && border.style) || 'solid',\n\t\t\t\t\t\t'border-color': (border && border.color) || '#eee',\n\t\t\t\t\t\t'border-radius': radius\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet classles = ''\n\t\t\t\tfor(let i in obj){\n\t\t\t\t\tclassles+= `${i}:${obj[i]};`\n\t\t\t\t}\n\t\t\t\treturn classles\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tuploadFiles(item, index) {\n\t\t\t\tthis.$emit(\"uploadFiles\", item)\n\t\t\t},\n\t\t\tchoose() {\n\t\t\t\tthis.$emit(\"choose\")\n\t\t\t},\n\t\t\tdelFile(index) {\n\t\t\t\tthis.$emit('delFile', index)\n\t\t\t},\n\t\t\tprviewImage(img, index) {\n\t\t\t\tlet urls = []\n\t\t\t\tif(Number(this.limit) === 1&&this.disablePreview&&!this.disabled){\n\t\t\t\t\tthis.$emit(\"choose\")\n\t\t\t\t}\n\t\t\t\tif(this.disablePreview) return\n\t\t\t\tthis.filesList.forEach(i => {\n\t\t\t\t\turls.push(i.url)\n\t\t\t\t})\n\n\t\t\t\tuni.previewImage({\n\t\t\t\t\turls: urls,\n\t\t\t\t\tcurrent: index\n\t\t\t\t});\n\t\t\t},\n\t\t\tvalue2px(value) {\n\t\t\t\tif (typeof value === 'number') {\n\t\t\t\t\tvalue += 'px'\n\t\t\t\t} else {\n\t\t\t\t\tif (value.indexOf('%') === -1) {\n\t\t\t\t\t\tvalue = value.indexOf('px') !== -1 ? value : value + 'px'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn value\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.uni-file-picker__container {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\tbox-sizing: border-box;\n\t\t/* #endif */\n\t\tflex-wrap: wrap;\n\t\tmargin: -5px;\n\t}\n\n\t.file-picker__box {\n\t\tposition: relative;\n\t\t// flex: 0 0 33.3%;\n\t\twidth: 33.3%;\n\t\theight: 0;\n\t\tpadding-top: 33.33%;\n\t\t/* #ifndef APP-NVUE */\n\t\tbox-sizing: border-box;\n\t\t/* #endif */\n\t}\n\n\t.file-picker__box-content {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tmargin: 5px;\n\t\tborder: 1px #eee solid;\n\t\tborder-radius: 5px;\n\t\toverflow: hidden;\n\t}\n\n\t.file-picker__progress {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\t/* border: 1px red solid; */\n\t\tz-index: 2;\n\t}\n\n\t.file-picker__progress-item {\n\t\twidth: 100%;\n\t}\n\n\t.file-picker__mask {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tposition: absolute;\n\t\tright: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tcolor: #fff;\n\t\tfont-size: 12px;\n\t\tbackground-color: rgba(0, 0, 0, 0.4);\n\t}\n\n\t.file-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.is-add {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.icon-add {\n\t\twidth: 50px;\n\t\theight: 5px;\n\t\tbackground-color: #f1f1f1;\n\t\tborder-radius: 2px;\n\t}\n\n\t.rotate {\n\t\tposition: absolute;\n\t\ttransform: rotate(90deg);\n\t}\n\n\t.icon-del-box {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: absolute;\n\t\ttop: 3px;\n\t\tright: 3px;\n\t\theight: 26px;\n\t\twidth: 26px;\n\t\tborder-radius: 50%;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tz-index: 2;\n\t\ttransform: rotate(-45deg);\n\t}\n\n\t.icon-del {\n\t\twidth: 15px;\n\t\theight: 2px;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 2px;\n\t}\n</style>\n","import Component from 'D:/代码测试/wx2/uni_modules/uni-file-picker/components/uni-file-picker/upload-image.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":"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"}