{"version":3,"file":"uni-file-picker.js","sources":["uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue","../../软件/HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDov5Luj56CB5rWL6K-VL3d4Mi91bmlfbW9kdWxlcy91bmktZmlsZS1waWNrZXIvY29tcG9uZW50cy91bmktZmlsZS1waWNrZXIvdW5pLWZpbGUtcGlja2VyLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"uni-file-picker\">\n\t\t<view v-if=\"title\" class=\"uni-file-picker__header\">\n\t\t\t<text class=\"file-title\">{{ title }}</text>\n\t\t\t<text class=\"file-count\">{{ filesList.length }}/{{ limitLength }}</text>\n\t\t</view>\n\t\t<upload-image v-if=\"fileMediatype === 'image' && showType === 'grid'\" :readonly=\"readonly\"\n\t\t\t:image-styles=\"imageStyles\" :files-list=\"filesList\" :limit=\"limitLength\" :disablePreview=\"disablePreview\"\n\t\t\t:delIcon=\"delIcon\" @uploadFiles=\"uploadFiles\" @choose=\"choose\" @delFile=\"delFile\">\n\t\t\t<slot>\n\t\t\t\t<view class=\"is-add\">\n\t\t\t\t\t<view class=\"icon-add\"></view>\n\t\t\t\t\t<view class=\"icon-add rotate\"></view>\n\t\t\t\t</view>\n\t\t\t</slot>\n\t\t</upload-image>\n\t\t<upload-file v-if=\"fileMediatype !== 'image' || showType !== 'grid'\" :readonly=\"readonly\"\n\t\t\t:list-styles=\"listStyles\" :files-list=\"filesList\" :showType=\"showType\" :delIcon=\"delIcon\"\n\t\t\t@uploadFiles=\"uploadFiles\" @choose=\"choose\" @delFile=\"delFile\">\n\t\t\t<slot><button type=\"primary\" size=\"mini\">选择文件</button></slot>\n\t\t</upload-file>\n\t</view>\n</template>\n\n<script>\n\timport {\n\t\tchooseAndUploadFile,\n\t\tuploadCloudFiles\n\t} from './choose-and-upload-file.js'\n\timport {\n\t\tget_file_ext,\n\t\tget_extname,\n\t\tget_files_and_is_max,\n\t\tget_file_info,\n\t\tget_file_data\n\t} from './utils.js'\n\timport uploadImage from './upload-image.vue'\n\timport uploadFile from './upload-file.vue'\n\tlet fileInput = null\n\t/**\n\t * FilePicker 文件选择上传\n\t * @description 文件选择上传组件，可以选择图片、视频等任意文件并上传到当前绑定的服务空间\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=4079\n\t * @property {Object|Array}\tvalue\t组件数据，通常用来回显 ,类型由return-type属性决定\n\t * @property {Boolean}\tdisabled = [true|false]\t组件禁用\n\t * \t@value true \t禁用\n\t * \t@value false \t取消禁用\n\t * @property {Boolean}\treadonly = [true|false]\t组件只读，不可选择，不显示进度，不显示删除按钮\n\t * \t@value true \t只读\n\t * \t@value false \t取消只读\n\t * @property {String}\treturn-type = [array|object]\t限制 value 格式，当为 object 时 ，组件只能单选，且会覆盖\n\t * \t@value array\t规定 value 属性的类型为数组\n\t * \t@value object\t规定 value 属性的类型为对象\n\t * @property {Boolean}\tdisable-preview = [true|false]\t禁用图片预览，仅 mode:grid 时生效\n\t * \t@value true \t禁用图片预览\n\t * \t@value false \t取消禁用图片预览\n\t * @property {Boolean}\tdel-icon = [true|false]\t是否显示删除按钮\n\t * \t@value true \t显示删除按钮\n\t * \t@value false \t不显示删除按钮\n\t * @property {Boolean}\tauto-upload = [true|false]\t是否自动上传，值为true则只触发@select,可自行上传\n\t * \t@value true \t自动上传\n\t * \t@value false \t取消自动上传\n\t * @property {Number|String}\tlimit\t最大选择个数 ，h5 会自动忽略多选的部分\n\t * @property {String}\ttitle\t组件标题，右侧显示上传计数\n\t * @property {String}\tmode = [list|grid]\t选择文件后的文件列表样式\n\t * \t@value list \t列表显示\n\t * \t@value grid \t宫格显示\n\t * @property {String}\tfile-mediatype = [image|video|all]\t选择文件类型\n\t * \t@value image\t只选择图片\n\t * \t@value video\t只选择视频\n\t * \t@value all\t\t选择所有文件\n\t * @property {Array}\tfile-extname\t选择文件后缀，根据 file-mediatype 属性而不同\n\t * @property {Object}\tlist-style\tmode:list 时的样式\n\t * @property {Object}\timage-styles\t选择文件后缀，根据 file-mediatype 属性而不同\n\t * @event {Function} select \t选择文件后触发\n\t * @event {Function} progress 文件上传时触发\n\t * @event {Function} success \t上传成功触发\n\t * @event {Function} fail \t\t上传失败触发\n\t * @event {Function} delete \t文件从列表移除时触发\n\t */\n\texport default {\n\t\tname: 'uniFilePicker',\n\t\tcomponents: {\n\t\t\tuploadImage,\n\t\t\tuploadFile\n\t\t},\n\t\toptions: {\n\t\t\tvirtualHost: true\n\t\t},\n\t\temits: ['select', 'success', 'fail', 'progress', 'delete', 'update:modelValue', 'input'],\n\t\tprops: {\n\t\t\tmodelValue: {\n\t\t\t\ttype: [Array, Object],\n\t\t\t\tdefault () {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t},\n\t\t\tvalue: {\n\t\t\t\ttype: [Array, Object],\n\t\t\t\tdefault () {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t},\n\t\t\tdisabled: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tdisablePreview: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tdelIcon: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\t// 自动上传\n\t\t\tautoUpload: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\t// 最大选择个数 ，h5只能限制单选或是多选\n\t\t\tlimit: {\n\t\t\t\ttype: [Number, String],\n\t\t\t\tdefault: 9\n\t\t\t},\n\t\t\t// 列表样式 grid | list | list-card\n\t\t\tmode: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'grid'\n\t\t\t},\n\t\t\t// 选择文件类型  image/video/all\n\t\t\tfileMediatype: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'image'\n\t\t\t},\n\t\t\t// 文件类型筛选\n\t\t\tfileExtname: {\n\t\t\t\ttype: [Array, String],\n\t\t\t\tdefault () {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tlistStyles: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t// 是否显示边框\n\t\t\t\t\t\tborder: true,\n\t\t\t\t\t\t// 是否显示分隔线\n\t\t\t\t\t\tdividline: true,\n\t\t\t\t\t\t// 线条样式\n\t\t\t\t\t\tborderStyle: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\timageStyles: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: 'auto',\n\t\t\t\t\t\theight: 'auto'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\treadonly: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\treturnType: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'array'\n\t\t\t},\n\t\t\tsizeType: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn ['original', 'compressed']\n\t\t\t\t}\n\t\t\t},\n\t\t\tsourceType: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault () {\n\t\t\t\t\treturn  ['album', 'camera']\n\t\t\t\t}\n\t\t\t},\n\t\t\tprovider: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: '' // 默认上传到 unicloud 内置存储 extStorage 扩展存储\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfiles: [],\n\t\t\t\tlocalValue: []\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tvalue: {\n\t\t\t\thandler(newVal, oldVal) {\n\t\t\t\t\tthis.setValue(newVal, oldVal)\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\tmodelValue: {\n\t\t\t\thandler(newVal, oldVal) {\n\t\t\t\t\tthis.setValue(newVal, oldVal)\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t},\n\t\tcomputed: {\n\t\t\tfilesList() {\n\t\t\t\tlet files = []\n\t\t\t\tthis.files.forEach(v => {\n\t\t\t\t\tfiles.push(v)\n\t\t\t\t})\n\t\t\t\treturn files\n\t\t\t},\n\t\t\tshowType() {\n\t\t\t\tif (this.fileMediatype === 'image') {\n\t\t\t\t\treturn this.mode\n\t\t\t\t}\n\t\t\t\treturn 'list'\n\t\t\t},\n\t\t\tlimitLength() {\n\t\t\t\tif (this.returnType === 'object') {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (!this.limit) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (this.limit >= 9) {\n\t\t\t\t\treturn 9\n\t\t\t\t}\n\t\t\t\treturn this.limit\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\t// TODO 兼容不开通服务空间的情况\n\t\t\tif (!(uniCloud.config && uniCloud.config.provider)) {\n\t\t\t\tthis.noSpace = true\n\t\t\t\tuniCloud.chooseAndUploadFile = chooseAndUploadFile\n\t\t\t}\n\t\t\tthis.form = this.getForm('uniForms')\n\t\t\tthis.formItem = this.getForm('uniFormsItem')\n\t\t\tif (this.form && this.formItem) {\n\t\t\t\tif (this.formItem.name) {\n\t\t\t\t\tthis.rename = this.formItem.name\n\t\t\t\t\tthis.form.inputChildrens.push(this)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 公开用户使用，清空文件\n\t\t\t * @param {Object} index\n\t\t\t */\n\t\t\tclearFiles(index) {\n\t\t\t\tif (index !== 0 && !index) {\n\t\t\t\t\tthis.files = []\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.setEmit()\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.files.splice(index, 1)\n\t\t\t\t}\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.setEmit()\n\t\t\t\t})\n\t\t\t},\n\t\t\t/**\n\t\t\t * 公开用户使用，继续上传\n\t\t\t */\n\t\t\tupload() {\n\t\t\t\tlet files = []\n\t\t\t\tthis.files.forEach((v, index) => {\n\t\t\t\t\tif (v.status === 'ready' || v.status === 'error') {\n\t\t\t\t\t\tfiles.push(Object.assign({}, v))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn this.uploadFiles(files)\n\t\t\t},\n\t\t\tasync setValue(newVal, oldVal) {\n\t\t\t\tconst newData =  async (v) => {\n\t\t\t\t\tconst reg = /cloud:\\/\\/([\\w.]+\\/?)\\S*/\n\t\t\t\t\tlet url = ''\n\t\t\t\t\tif(v.fileID){\n\t\t\t\t\t\turl = v.fileID\n\t\t\t\t\t}else{\n\t\t\t\t\t\turl = v.url\n\t\t\t\t\t}\n\t\t\t\t\tif (reg.test(url)) {\n\t\t\t\t\t\tv.fileID = url\n\t\t\t\t\t\tv.url = await this.getTempFileURL(url)\n\t\t\t\t\t}\n\t\t\t\t\tif(v.url) v.path = v.url\n\t\t\t\t\treturn v\n\t\t\t\t}\n\t\t\t\tif (this.returnType === 'object') {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\tawait newData(newVal)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewVal = {}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!newVal) newVal = []\n\t\t\t\t\tfor(let i =0 ;i < newVal.length ;i++){\n\t\t\t\t\t\tlet v = newVal[i]\n\t\t\t\t\t\tawait newData(v)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.localValue = newVal\n\t\t\t\tif (this.form && this.formItem &&!this.is_reset) {\n\t\t\t\t\tthis.is_reset = false\n\t\t\t\t\tthis.formItem.setValue(this.localValue)\n\t\t\t\t}\n\t\t\t\tlet filesData = Object.keys(newVal).length > 0 ? newVal : [];\n\t\t\t\tthis.files = [].concat(filesData)\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 选择文件\n\t\t\t */\n\t\t\tchoose() {\n\t\t\t\tif (this.disabled) return\n\t\t\t\tif (this.files.length >= Number(this.limitLength) && this.showType !== 'grid' && this.returnType ===\n\t\t\t\t\t'array') {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: `您最多选择 ${this.limitLength} 个文件`,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.chooseFiles()\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 选择文件并上传\n\t\t\t */\n\t\t\tchooseFiles() {\n\t\t\t\tconst _extname = get_extname(this.fileExtname)\n\t\t\t\t// 获取后缀\n\t\t\t\tuniCloud\n\t\t\t\t\t.chooseAndUploadFile({\n\t\t\t\t\t\ttype: this.fileMediatype,\n\t\t\t\t\t\tcompressed: false,\n\t\t\t\t\t\tsizeType: this.sizeType,\n\t\t\t\t\t\tsourceType: this.sourceType,\n\t\t\t\t\t\t// TODO 如果为空，video 有问题\n\t\t\t\t\t\textension: _extname.length > 0 ? _extname : undefined,\n\t\t\t\t\t\tcount: this.limitLength - this.files.length, //默认9\n\t\t\t\t\t\tonChooseFile: this.chooseFileCallback,\n\t\t\t\t\t\tonUploadProgress: progressEvent => {\n\t\t\t\t\t\t\tthis.setProgress(progressEvent, progressEvent.index)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(result => {\n\t\t\t\t\t\tthis.setSuccessAndError(result.tempFiles)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log('选择失败', err)\n\t\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 选择文件回调\n\t\t\t * @param {Object} res\n\t\t\t */\n\t\t\tasync chooseFileCallback(res) {\n\t\t\t\tconst _extname = get_extname(this.fileExtname)\n\t\t\t\tconst is_one = (Number(this.limitLength) === 1 &&\n\t\t\t\t\t\tthis.disablePreview &&\n\t\t\t\t\t\t!this.disabled) ||\n\t\t\t\t\tthis.returnType === 'object'\n\t\t\t\t// 如果这有一个文件 ，需要清空本地缓存数据\n\t\t\t\tif (is_one) {\n\t\t\t\t\tthis.files = []\n\t\t\t\t}\n\n\t\t\t\tlet {\n\t\t\t\t\tfilePaths,\n\t\t\t\t\tfiles\n\t\t\t\t} = get_files_and_is_max(res, _extname)\n\t\t\t\tif (!(_extname && _extname.length > 0)) {\n\t\t\t\t\tfilePaths = res.tempFilePaths\n\t\t\t\t\tfiles = res.tempFiles\n\t\t\t\t}\n\n\t\t\t\tlet currentData = []\n\t\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\t\tif (this.limitLength - this.files.length <= 0) break\n\t\t\t\t\tfiles[i].uuid = Date.now()\n\t\t\t\t\tlet filedata = await get_file_data(files[i], this.fileMediatype)\n\t\t\t\t\tfiledata.progress = 0\n\t\t\t\t\tfiledata.status = 'ready'\n\t\t\t\t\tthis.files.push(filedata)\n\t\t\t\t\tcurrentData.push({\n\t\t\t\t\t\t...filedata,\n\t\t\t\t\t\tfile: files[i]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.$emit('select', {\n\t\t\t\t\ttempFiles: currentData,\n\t\t\t\t\ttempFilePaths: filePaths\n\t\t\t\t})\n\t\t\t\tres.tempFiles = files\n\t\t\t\t// 停止自动上传\n\t\t\t\tif (!this.autoUpload || this.noSpace) {\n\t\t\t\t\tres.tempFiles = []\n\t\t\t\t}\n\t\t\t\tres.tempFiles.forEach((fileItem, index) => {\n\t\t\t\t\tthis.provider && (fileItem.provider = this.provider);\n\t\t\t\t\tconst fileNameSplit = fileItem.name.split('.')\n\t\t\t\t\tconst ext = fileNameSplit.pop()\n\t\t\t\t\tconst fileName = fileNameSplit.join('.').replace(/[\\s\\/\\?<>\\\\:\\*\\|\":]/g, '_')\n\t\t\t\t\tfileItem.cloudPath = fileName + '_' + Date.now() + '_' + index + '.' + ext\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 批传\n\t\t\t * @param {Object} e\n\t\t\t */\n\t\t\tuploadFiles(files) {\n\t\t\t\tfiles = [].concat(files)\n\t\t\t\treturn uploadCloudFiles.call(this, files, 5, res => {\n\t\t\t\t\t\tthis.setProgress(res, res.index, true)\n\t\t\t\t\t})\n\t\t\t\t\t.then(result => {\n\t\t\t\t\t\tthis.setSuccessAndError(result)\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 成功或失败\n\t\t\t */\n\t\t\tasync setSuccessAndError(res, fn) {\n\t\t\t\tlet successData = []\n\t\t\t\tlet errorData = []\n\t\t\t\tlet tempFilePath = []\n\t\t\t\tlet errorTempFilePath = []\n\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\tconst item = res[i]\n\t\t\t\t\tconst index = item.uuid ? this.files.findIndex(p => p.uuid === item.uuid) : item.index\n\n\t\t\t\t\tif (index === -1 || !this.files) break\n\t\t\t\t\tif (item.errMsg === 'request:fail') {\n\t\t\t\t\t\tthis.files[index].url = item.path\n\t\t\t\t\t\tthis.files[index].status = 'error'\n\t\t\t\t\t\tthis.files[index].errMsg = item.errMsg\n\t\t\t\t\t\t// this.files[index].progress = -1\n\t\t\t\t\t\terrorData.push(this.files[index])\n\t\t\t\t\t\terrorTempFilePath.push(this.files[index].url)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.files[index].errMsg = ''\n\t\t\t\t\t\tthis.files[index].fileID = item.url\n\t\t\t\t\t\tconst reg = /cloud:\\/\\/([\\w.]+\\/?)\\S*/\n\t\t\t\t\t\tif (reg.test(item.url)) {\n\t\t\t\t\t\t\tthis.files[index].url = await this.getTempFileURL(item.url)\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.files[index].url = item.url\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.files[index].status = 'success'\n\t\t\t\t\t\tthis.files[index].progress += 1\n\t\t\t\t\t\tsuccessData.push(this.files[index])\n\t\t\t\t\t\ttempFilePath.push(this.files[index].fileID)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (successData.length > 0) {\n\t\t\t\t\tthis.setEmit()\n\t\t\t\t\t// 状态改变返回\n\t\t\t\t\tthis.$emit('success', {\n\t\t\t\t\t\ttempFiles: this.backObject(successData),\n\t\t\t\t\t\ttempFilePaths: tempFilePath\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (errorData.length > 0) {\n\t\t\t\t\tthis.$emit('fail', {\n\t\t\t\t\t\ttempFiles: this.backObject(errorData),\n\t\t\t\t\t\ttempFilePaths: errorTempFilePath\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 获取进度\n\t\t\t * @param {Object} progressEvent\n\t\t\t * @param {Object} index\n\t\t\t * @param {Object} type\n\t\t\t */\n\t\t\tsetProgress(progressEvent, index, type) {\n\t\t\t\tconst fileLenth = this.files.length\n\t\t\t\tconst percentNum = (index / fileLenth) * 100\n\t\t\t\tconst percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n\t\t\t\tlet idx = index\n\t\t\t\tif (!type) {\n\t\t\t\t\tidx = this.files.findIndex(p => p.uuid === progressEvent.tempFile.uuid)\n\t\t\t\t}\n\t\t\t\tif (idx === -1 || !this.files[idx]) return\n\t\t\t\t// fix by mehaotian 100 就会消失，-1 是为了让进度条消失\n\t\t\t\tthis.files[idx].progress = percentCompleted - 1\n\t\t\t\t// 上传中\n\t\t\t\tthis.$emit('progress', {\n\t\t\t\t\tindex: idx,\n\t\t\t\t\tprogress: parseInt(percentCompleted),\n\t\t\t\t\ttempFile: this.files[idx]\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 删除文件\n\t\t\t * @param {Object} index\n\t\t\t */\n\t\t\tdelFile(index) {\n\t\t\t\tthis.$emit('delete', {\n\t\t\t\t\tindex,\n\t\t\t\t\ttempFile: this.files[index],\n\t\t\t\t\ttempFilePath: this.files[index].url\n\t\t\t\t})\n\t\t\t\tthis.files.splice(index, 1)\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.setEmit()\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 获取文件名和后缀\n\t\t\t * @param {Object} name\n\t\t\t */\n\t\t\tgetFileExt(name) {\n\t\t\t\tconst last_len = name.lastIndexOf('.')\n\t\t\t\tconst len = name.length\n\t\t\t\treturn {\n\t\t\t\t\tname: name.substring(0, last_len),\n\t\t\t\t\text: name.substring(last_len + 1, len)\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 处理返回事件\n\t\t\t */\n\t\t\tsetEmit() {\n\t\t\t\tlet data = []\n\t\t\t\tif (this.returnType === 'object') {\n\t\t\t\t\tdata = this.backObject(this.files)[0]\n\t\t\t\t\tthis.localValue = data?data:null\n\t\t\t\t} else {\n\t\t\t\t\tdata = this.backObject(this.files)\n\t\t\t\t\tif (!this.localValue) {\n\t\t\t\t\t\tthis.localValue = []\n\t\t\t\t\t}\n\t\t\t\t\tthis.localValue = [...data]\n\t\t\t\t}\n\t\t\t\t// #ifdef VUE3\n\t\t\t\tthis.$emit('update:modelValue', this.localValue)\n\t\t\t\t// #endif\n\t\t\t\t// #ifndef VUE3\n\t\t\t\tthis.$emit('input', this.localValue)\n\t\t\t\t// #endif\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 处理返回参数\n\t\t\t * @param {Object} files\n\t\t\t */\n\t\t\tbackObject(files) {\n\t\t\t\tlet newFilesData = []\n\t\t\t\tfiles.forEach(v => {\n\t\t\t\t\tnewFilesData.push({\n\t\t\t\t\t\textname: v.extname,\n\t\t\t\t\t\tfileType: v.fileType,\n\t\t\t\t\t\timage: v.image,\n\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\tpath: v.path,\n\t\t\t\t\t\tsize: v.size,\n\t\t\t\t\t\tfileID:v.fileID,\n\t\t\t\t\t\turl: v.url,\n\t\t\t\t\t\t// 修改删除一个文件后不能再上传的bug, #694\n            uuid: v.uuid,\n            status: v.status,\n            cloudPath: v.cloudPath\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn newFilesData\n\t\t\t},\n\t\t\tasync getTempFileURL(fileList) {\n\t\t\t\tfileList = {\n\t\t\t\t\tfileList: [].concat(fileList)\n\t\t\t\t}\n\t\t\t\tconst urls = await uniCloud.getTempFileURL(fileList)\n\t\t\t\treturn urls.fileList[0].tempFileURL || ''\n\t\t\t},\n\t\t\t/**\n\t\t\t * 获取父元素实例\n\t\t\t */\n\t\t\tgetForm(name = 'uniForms') {\n\t\t\t\tlet parent = this.$parent;\n\t\t\t\tlet parentName = parent.$options.name;\n\t\t\t\twhile (parentName !== name) {\n\t\t\t\t\tparent = parent.$parent;\n\t\t\t\t\tif (!parent) return false;\n\t\t\t\t\tparentName = parent.$options.name;\n\t\t\t\t}\n\t\t\t\treturn parent;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.uni-file-picker {\n\t\t/* #ifndef APP-NVUE */\n\t\tbox-sizing: border-box;\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\t/* #endif */\n\t\tflex: 1;\n\t}\n\n\t.uni-file-picker__header {\n\t\tpadding-top: 5px;\n\t\tpadding-bottom: 10px;\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tjustify-content: space-between;\n\t}\n\n\t.file-title {\n\t\tfont-size: 14px;\n\t\tcolor: #333;\n\t}\n\n\t.file-count {\n\t\tfont-size: 14px;\n\t\tcolor: #999;\n\t}\n\n\t.is-add {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.icon-add {\n\t\twidth: 50px;\n\t\theight: 5px;\n\t\tbackground-color: #f1f1f1;\n\t\tborder-radius: 2px;\n\t}\n\n\t.rotate {\n\t\tposition: absolute;\n\t\ttransform: rotate(90deg);\n\t}\n</style>\n","import Component from 'D:/代码测试/wx2/uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue'\nwx.createComponent(Component)"],"names":["uniCloud","chooseAndUploadFile","uni","get_extname","get_files_and_is_max","get_file_data","uploadCloudFiles"],"mappings":"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"}