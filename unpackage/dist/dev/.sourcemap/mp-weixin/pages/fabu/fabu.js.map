{"version":3,"file":"fabu.js","sources":["pages/fabu/fabu.vue","../../è½¯ä»¶/HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZmFidS9mYWJ1LnZ1ZQ"],"sourcesContent":["<script>\nexport default {\n\tname: 'Fabu'\n}\n</script>\n\n<script setup>\n\timport { ref, onMounted, nextTick, computed } from 'vue'\n\timport { useUserInfoStore } from '@/store/user.js'\n\timport { onLoad } from '@dcloudio/uni-app'  // æ·»åŠ è¿™ä¸€è¡Œ\n\timport { fixImageUrl, getDefaultImage, getCurrentDomain } from '@/utils/domainConfig.js'  // æ·»åŠ åŸŸåé…ç½®\n\n\t// Store & API\n\tconst userStore = useUserInfoStore( )\n\tconst articleApi = uniCloud.importObject( 'articleWx', { customUI: true })\n\tconst extStorageCo = uniCloud.importObject('fabuWx', { customUI: true })\n\t// é¡µé¢åˆå§‹æ•°æ®\n\tconst articleData = ref( null )\n\tconst categoryList = ref( [ ] )\n\tconst cateIndex = ref( 0 )\n\tconst imageList = ref([])\n\tconst uploadingCount = ref(0)\n\tconst locationInfo = ref( null )\n\tconst content = ref( '' )\n\tconst selectedCategory = ref( null )\n\tconst videoInfo = ref(null)\n\tconst textareaFocus = ref(false)\n\tconst contentTextarea = ref(null)\n\tconst payAmount = ref(0)\n\tconst videoLink = ref('')\n\tconst inputHeight = ref(170)\n\tconst selectionStart = ref(0)\n\tconst selectionEnd = ref(0)\n\tconst textareaElement = ref(null) // è®°å½•DOMå…ƒç´ \n\tconst isInSelectionMode = ref(false) // æ–‡æœ¬é€‰æ‹©æ¨¡å¼çŠ¶æ€\n\t// æ·»åŠ å›¾ç‰‡é¢„è§ˆç›¸å…³å˜é‡\n\tconst showImagePreview = ref(false)\n\tconst currentPreviewImage = ref('')\n\tconst previewImageIndex = ref(0)\n\t\n\t// åŸŸåçŠ¶æ€æ˜¾ç¤ºç›¸å…³å˜é‡\n\tconst showDomainInfo = ref(false)\n\tconst domainStatus = ref({\n\t\tcurrentDomain: '',\n\t\timageCount: 0,\n\t\tfixedCount: 0\n\t})\n\n\t// æ·»åŠ ç²¾ç¡®ä½ç½®ä¿¡æ¯å˜é‡\n\tconst preciseLocationInfo = ref({\n\t\tlatitude: null,\n\t\tlongitude: null,\n\t\taccuracy: null,\n\t\taltitude: null,\n\t\tspeed: null,\n\t\ttimestamp: null,\n\t\tprovince: '',\n\t\tcity: '',\n\t\tdistrict: '',\n\t\tstreet: '',\n\t\tstreetNumber: '',\n\t\tpoiName: ''\n\t})\n\n\t// è®¡ç®—é€‰æ‹©çš„å­—ç¬¦æ•°\n\tconst selectedCharsCount = computed(() => {\n\t\treturn selectionEnd.value - selectionStart.value\n\t})\n\n\t// å›¾æ ‡ç”Ÿæˆç›¸å…³\n\tconst iconCustomizing = ref(false)\n\tconst textOffsetX = ref(0)  // æ–‡å­—Xè½´åç§»é‡\n\tconst textOffsetY = ref(0)  // æ–‡å­—Yè½´åç§»é‡\n\tconst textSize = ref(100)   // æ–‡å­—å¤§å°ç™¾åˆ†æ¯”\n\tconst previewImageUrl = ref('') // é¢„è§ˆå›¾URL\n\n\t// å½“å‰æ­£åœ¨ç¼–è¾‘çš„åˆ†ç±»\n\tlet currentEditingCategory = null;\n\n\t// æ·»åŠ ä»¥ä¸‹å¸¸ç”¨æ–‡æœ¬åŠŸèƒ½ç›¸å…³çš„å˜é‡\n\tconst commonPhrases = ref([\n\t\t'æ¬¢è¿å’¨è¯¢',\n\t\t'å…¨æ–°äº§å“',\n\t\t'é™æ—¶ä¼˜æƒ ',\n\t\t'è¯šä¿¡äº¤æ˜“',\n\t\t'æ”¯æŒè‡ªæ'\n\t])\n\n\t// æ·»åŠ è¡¨æƒ…ç¬¦å·ç›¸å…³çš„å˜é‡\n\tconst showEmojiPanel = ref(false)\n\tconst emojiGroups = ref([\n\t\t{\n\t\t\tname: 'å¸¸ç”¨',\n\t\t\temojis: ['ğŸ˜Š', 'ğŸ‘', 'â¤ï¸', 'ğŸ‘‹', 'ğŸ™', 'ğŸ”¥', 'ğŸ’¯', 'ğŸ‘', 'ğŸ‰', 'âœ¨', 'ğŸŒ¹', 'ğŸ’ª', 'ğŸ¤']\n\t\t},\n\t\t{\n\t\t\tname: 'è¡¨æƒ…',\n\t\t\temojis: ['ğŸ˜€', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜']\n\t\t},\n\t\t{\n\t\t\tname: 'æ‰‹åŠ¿',\n\t\t\temojis: ['ğŸ‘', 'ğŸ‘', 'ğŸ‘Œ', 'âœŒï¸', 'ğŸ¤', 'ğŸ¤Ÿ', 'ğŸ¤™', 'ğŸ¤›', 'ğŸ¤œ', 'ğŸ‘Š', 'âœŠ', 'ğŸ¤', 'ğŸ‘']\n\t\t}\n\t])\n\tconst currentEmojiGroupIndex = ref(0)\n\n\t// æ·»åŠ å¿«æ·è¾“å…¥å¸¸ç”¨è¯åŠŸèƒ½\n\t// åˆ é™¤ä»¥ä¸‹å†…å®¹\n\t// const quickPhrases = ref([\n\t//   'æ¬¢è¿å’¨è¯¢',\n\t//   'æœ‰ç°è´§',\n\t//   'æ”¯æŒè‡ªæ',\n\t//   'å…¨æ–°æ­£å“',\n\t//   'åŒ…é‚®åˆ°å®¶'\n\t// ])\n\t// const showQuickPhrases = ref(false)\n\t// const toggleQuickPhrases = () => {...}\n\t// const insertQuickPhrase = (phrase) => {...}\n\n\t// æ˜¾ç¤ºå¿«æ·çŸ­è¯­é¢æ¿çš„çŠ¶æ€\n\t// åˆ é™¤ä»¥ä¸‹å†…å®¹\n\t// const showQuickPhrases = ref(false)\n\n\t// åˆ‡æ¢å¿«æ·çŸ­è¯­é¢æ¿\n\t// åˆ é™¤ä»¥ä¸‹å†…å®¹\n\t// const toggleQuickPhrases = () => {...}\n\n\t// æ’å…¥å¿«æ·çŸ­è¯­\n\t// åˆ é™¤ä»¥ä¸‹å†…å®¹\n\t// const insertQuickPhrase = (phrase) => {...}\n\n\t// è·å–ä½ç½®å’Œåˆ†ç±»\n\tconst getLocaAndCate = async ( ) => {\n\t\ttry {\n\t\t\t// æ˜¾ç¤ºåŠ è½½æç¤º\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'åŠ è½½ä¸­...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// è·å–é«˜ç²¾åº¦ä½ç½®ä¿¡æ¯\n\t\t\tlet locationRes = await uni.getLocation({\n\t\t\t\ttype: 'gcj02',\n\t\t\t\thighAccuracyExpireTime: 10000, // 10ç§’è¶…æ—¶\n\t\t\t\tisHighAccuracy: true, // å¯ç”¨é«˜ç²¾åº¦å®šä½\n\t\t\t\taltitude: true // è·å–é«˜åº¦ä¿¡æ¯\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error('è·å–ä½ç½®å¤±è´¥:', err)\n\t\t\t\t// å¦‚æœè·å–ä½ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤åæ ‡\n\t\t\t\treturn { longitude: 116.397428, latitude: 39.90923 }\n\t\t\t})\n\t\t\t\n\t\t\t// ä¿å­˜ç²¾ç¡®ä½ç½®ä¿¡æ¯\n\t\t\tpreciseLocationInfo.value = {\n\t\t\t\tlatitude: locationRes.latitude,\n\t\t\t\tlongitude: locationRes.longitude,\n\t\t\t\taccuracy: locationRes.accuracy || 0,\n\t\t\t\taltitude: locationRes.altitude || 0,\n\t\t\t\tspeed: locationRes.speed || 0,\n\t\t\t\ttimestamp: Date.now(),\n\t\t\t\tprovince: '',\n\t\t\t\tcity: '',\n\t\t\t\tdistrict: '',\n\t\t\t\tstreet: '',\n\t\t\t\tstreetNumber: '',\n\t\t\t\tpoiName: ''\n\t\t\t}\n\t\t\t\n\t\t\t// è°ƒç”¨APIè·å–åˆ†ç±»å’Œåœ°å€ä¿¡æ¯\n\t\t\tconst res = await articleApi.addReady(`${locationRes.longitude},${locationRes.latitude}`)\n\t\t\tconsole.log('è·å–åˆ†ç±»å’Œåœ°å€ä¿¡æ¯æˆåŠŸ:', res)\n\t\t\t\n\t\t\t// è®¾ç½®ä½ç½®ä¿¡æ¯\n\t\t\tlocationInfo.value = {\n\t\t\t\taddress: res.address || 'æœªçŸ¥åœ°å€',\n\t\t\t\tdistrict: res.district || 'æœªçŸ¥åŒºåŸŸ'\n\t\t\t}\n\t\t\t\n\t\t\t// è§£æè¯¦ç»†åœ°å€ä¿¡æ¯\n\t\t\tif (res.address && res.address !== 'æœªçŸ¥åœ°å€') {\n\t\t\t\tparseDetailedAddress(res.address, res.district)\n\t\t\t}\n\t\t\t\n\t\t\t// å¦‚æœè·å–åˆ°äº†åŒºåŸŸä¿¡æ¯ï¼Œåˆ™å°è¯•æ ¹æ®åŒºåŸŸåˆ›å»ºæˆ–è·å–åˆ†ç±»\n\t\t\tif (res.district && res.district !== 'æœªçŸ¥åŒºåŸŸ') {\n\t\t\t\ttry {\n\t\t\t\t\t// è°ƒç”¨äº‘å‡½æ•°åˆ›å»ºæˆ–è·å–åŸºäºåŒºåŸŸçš„åˆ†ç±»\n\t\t\t\t\tconst categoryResult = await extStorageCo.processCategoryFromDistrict(res.district)\n\t\t\t\t\tconsole.log('åŒºåŸŸåˆ†ç±»å¤„ç†ç»“æœ:', categoryResult)\n\t\t\t\t\t\n\t\t\t\t\t// å¦‚æœæˆåŠŸåˆ›å»ºæˆ–è·å–äº†åŸºäºä½ç½®çš„åˆ†ç±»ï¼Œé‡æ–°è·å–åˆ†ç±»åˆ—è¡¨\n\t\t\t\t\tif (categoryResult.code === 0 && categoryResult.data) {\n\t\t\t\t\t\t// é‡æ–°è·å–æœ€æ–°çš„åˆ†ç±»åˆ—è¡¨\n\t\t\t\t\t\tconst updatedCateRes = await articleApi.addReady(`${locationRes.longitude},${locationRes.latitude}`)\n\t\t\t\t\t\tif (updatedCateRes.cateList && updatedCateRes.cateList.length > 0) {\n\t\t\t\t\t\t\tres.cateList = updatedCateRes.cateList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (categoryError) {\n\t\t\t\t\tconsole.error('å¤„ç†åŒºåŸŸåˆ†ç±»å¤±è´¥:', categoryError)\n\t\t\t\t\t// ç»§ç»­ä½¿ç”¨åŸæœ‰åˆ†ç±»åˆ—è¡¨ï¼Œä¸ä¸­æ–­æµç¨‹\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// è®¾ç½®åˆ†ç±»åˆ—è¡¨ - åªä¿ç•™å½“å‰ä½ç½®çš„åˆ†ç±»\n\t\t\tif (res.cateList && res.cateList.length > 0) {\n\t\t\t\t// ç­›é€‰å‡ºå½“å‰åŒºåŸŸçš„ä½ç½®åˆ†ç±»\n\t\t\t\tconst locationBasedCategories = res.cateList.filter(cate => \n\t\t\t\t\tcate.is_location_based && cate.location_district === res.district\n\t\t\t\t)\n\t\t\t\t\n\t\t\t\t// å¦‚æœæœ‰æœ¬åœ°åŒºåˆ†ç±»ï¼Œåˆ™åªæ˜¾ç¤ºå®ƒä»¬\n\t\t\t\tif (locationBasedCategories.length > 0) {\n\t\t\t\t\tcategoryList.value = locationBasedCategories.map(cate => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...cate,\n\t\t\t\t\t\t\ticon: cate.cate_img || getDefaultCategoryIcon(cate.cate_name)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// é€‰æ‹©ç¬¬ä¸€ä¸ªä½ç½®åˆ†ç±»\n\t\t\t\t\tselectedCategory.value = categoryList.value[0]._id\n\t\t\t\t\tcateIndex.value = 0\n\t\t\t\t\t\n\t\t\t\t\t// è‡ªåŠ¨ä¸ºä½ç½®åˆ†ç±»ç”Ÿæˆå›¾æ ‡ï¼ˆå¦‚æœéœ€è¦ï¼‰\n\t\t\t\t\tconst firstCategory = categoryList.value[0]\n\t\t\t\t\tif (!firstCategory.cate_img || firstCategory.cate_img.includes('default')) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconsole.log('ä¸ºä½ç½®åˆ†ç±»è‡ªåŠ¨ç”Ÿæˆå›¾æ ‡:', firstCategory.cate_name)\n\t\t\t\t\t\t\tconst iconResult = await generateCategoryIcon(firstCategory.cate_name, firstCategory._id)\n\t\t\t\t\t\t\tif (iconResult && iconResult.iconURL) {\n\t\t\t\t\t\t\t\t// æ›´æ–°UIä¸­çš„å›¾æ ‡\n\t\t\t\t\t\t\t\tfirstCategory.icon = iconResult.iconURL\n\t\t\t\t\t\t\t\t// ç¡®ä¿åˆ†ç±»åˆ—è¡¨ä¸­çš„å›¾æ ‡ä¹Ÿè¢«æ›´æ–°\n\t\t\t\t\t\t\t\tcategoryList.value[0].icon = iconResult.iconURL\n\t\t\t\t\t\t\t\tcategoryList.value[0].cate_img = iconResult.iconURL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (iconError) {\n\t\t\t\t\t\t\tconsole.error('è‡ªåŠ¨ç”Ÿæˆä½ç½®åˆ†ç±»å›¾æ ‡å¤±è´¥:', iconError)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// å¦‚æœæ²¡æœ‰ä½ç½®åˆ†ç±»ï¼Œå°è¯•åˆ›å»ºä¸€ä¸ª\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (res.district && res.district !== 'æœªçŸ¥åŒºåŸŸ') {\n\t\t\t\t\t\t\t// åˆ›å»ºå½“å‰ä½ç½®çš„åˆ†ç±»\n\t\t\t\t\t\t\tconst createResult = await extStorageCo.createLocationCategory({\n\t\t\t\t\t\t\t\tdistrict: res.district,\n\t\t\t\t\t\t\t\taddress: res.address\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (createResult && createResult.categoryId) {\n\t\t\t\t\t\t\t\t// åˆ›å»ºæˆåŠŸï¼Œæ·»åŠ åˆ°åˆ†ç±»åˆ—è¡¨\n\t\t\t\t\t\t\t\tconst newCategory = {\n\t\t\t\t\t\t\t\t\t_id: createResult.categoryId,\n\t\t\t\t\t\t\t\t\tcate_name: res.district,\n\t\t\t\t\t\t\t\t\tis_location_based: true,\n\t\t\t\t\t\t\t\t\tlocation_district: res.district,\n\t\t\t\t\t\t\t\t\ticon: getDefaultCategoryIcon(res.district)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tcategoryList.value = [newCategory]\n\t\t\t\t\t\t\t\tselectedCategory.value = newCategory._id\n\t\t\t\t\t\t\t\tcateIndex.value = 0\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// ä¸ºæ–°åˆ†ç±»ç”Ÿæˆå›¾æ ‡\n\t\t\t\t\t\t\t\thandleGenerateIcon(newCategory)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// åˆ›å»ºå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤åˆ†ç±»\n\t\t\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// æ²¡æœ‰ä½ç½®ä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤åˆ†ç±»\n\t\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('åˆ›å»ºä½ç½®åˆ†ç±»å¤±è´¥:', e)\n\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('æœªè·å–åˆ°åˆ†ç±»åˆ—è¡¨æˆ–åˆ†ç±»åˆ—è¡¨ä¸ºç©º')\n\t\t\t\tsetDefaultCategory()\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('è·å–ä½ç½®å’Œåˆ†ç±»å¤±è´¥:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'è·å–åˆ†ç±»å¤±è´¥ï¼Œè¯·é‡è¯•',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\t\n\t\t\t// è®¾ç½®é»˜è®¤å€¼\n\t\t\tlocationInfo.value = {\n\t\t\t\taddress: 'æœªçŸ¥åœ°å€',\n\t\t\t\tdistrict: 'æœªçŸ¥åŒºåŸŸ'\n\t\t\t}\n\t\t\tsetDefaultCategory()\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\t\n\t// è®¾ç½®é»˜è®¤åˆ†ç±»çš„è¾…åŠ©å‡½æ•°\n\tconst setDefaultCategory = () => {\n\t\tcategoryList.value = [{ \n\t\t\t_id: 'default', \n\t\t\tcate_name: 'é»˜è®¤åˆ†ç±»',\n\t\t\ticon: '/static/images/category/default.png'\n\t\t}]\n\t\tselectedCategory.value = 'default'\n\t\tcateIndex.value = 0\n\t}\n\n\t// è§£æè¯¦ç»†åœ°å€ä¿¡æ¯\n\tconst parseDetailedAddress = (address, district) => {\n\t\ttry {\n\t\t\t// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æåœ°å€\n\t\t\tconst addressParts = {\n\t\t\t\tprovince: '',\n\t\t\t\tcity: '',\n\t\t\t\tdistrict: district || '',\n\t\t\t\tstreet: '',\n\t\t\t\tstreetNumber: '',\n\t\t\t\tpoiName: ''\n\t\t\t}\n\t\t\t\n\t\t\t// æå–çœä»½ä¿¡æ¯\n\t\t\tconst provinceMatch = address.match(/(ä¸­å›½)?(.+?çœ|ä¸­å›½.+?è‡ªæ²»åŒº|ä¸­å›½.+?å¸‚)/)\n\t\t\tif (provinceMatch) {\n\t\t\t\taddressParts.province = provinceMatch[2] || provinceMatch[1]\n\t\t\t}\n\t\t\t\n\t\t\t// æå–åŸå¸‚ä¿¡æ¯\n\t\t\tconst cityMatch = address.match(/(çœ|å¸‚|è‡ªæ²»åŒº)(.+?å¸‚)/)\n\t\t\tif (cityMatch) {\n\t\t\t\taddressParts.city = cityMatch[2]\n\t\t\t}\n\t\t\t\n\t\t\t// æå–è¡—é“ä¿¡æ¯\n\t\t\tconst streetMatch = address.match(/(åŒº|å¿)(.+?)(è¡—é“|é•‡|ä¹¡)/)\n\t\t\tif (streetMatch) {\n\t\t\t\taddressParts.street = streetMatch[2] + streetMatch[3]\n\t\t\t}\n\t\t\t\n\t\t\t// æå–POIä¿¡æ¯ï¼ˆå…·ä½“åœ°åï¼‰\n\t\t\tconst poiMatch = address.match(/(è¡—é“|é•‡|ä¹¡)(.+)/)\n\t\t\tif (poiMatch) {\n\t\t\t\taddressParts.poiName = poiMatch[2].trim()\n\t\t\t}\n\t\t\t\n\t\t\t// æ›´æ–°ç²¾ç¡®ä½ç½®ä¿¡æ¯\n\t\t\tpreciseLocationInfo.value = {\n\t\t\t\t...preciseLocationInfo.value,\n\t\t\t\t...addressParts\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('è§£æçš„è¯¦ç»†åœ°å€ä¿¡æ¯:', addressParts)\n\t\t} catch (error) {\n\t\t\tconsole.error('è§£æåœ°å€ä¿¡æ¯å¤±è´¥:', error)\n\t\t}\n\t}\n\n\t// é‡æ–°å®šä½\n\tconst relocate = async () => {\n\t\tuni.showToast({\n\t\t\ttitle: 'æ­£åœ¨é‡æ–°å®šä½...',\n\t\t\ticon: 'loading'\n\t\t})\n\t\t\n\t\ttry {\n\t\t\tawait getLocaAndCate()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'å®šä½æˆåŠŸ',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'å®šä½å¤±è´¥',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// ç®€åŒ–åœ°å€æ˜¾ç¤º\n\tconst getSimplifiedAddress = (address) => {\n\t\tif (!address || address === 'æœªçŸ¥åœ°å€') {\n\t\t\treturn ''\n\t\t}\n\t\t\n\t\t// ç§»é™¤çœä»½ä¿¡æ¯ï¼Œä¿ç•™ä¸»è¦åœ°å\n\t\tlet simplified = address\n\t\t\n\t\t// ç§»é™¤çœä»½å‰ç¼€\n\t\tsimplified = simplified.replace(/^.*?çœ/, '')\n\t\tsimplified = simplified.replace(/^.*?å¸‚/, '')\n\t\tsimplified = simplified.replace(/^.*?è‡ªæ²»åŒº/, '')\n\t\t\n\t\t// å¦‚æœåœ°å€è¿‡é•¿ï¼Œåªä¿ç•™å‰éƒ¨åˆ†\n\t\tif (simplified.length > 20) {\n\t\t\t// æ‰¾åˆ°é€‚åˆçš„æˆªæ–­ç‚¹ï¼ˆæŒ‰ç…§è¡Œæ”¿åŒºåˆ’æˆ–åœ°æ ‡æˆªæ–­ï¼‰\n\t\t\tconst breakPoints = ['å¿', 'åŒº', 'é•‡', 'è¡—é“', 'ä¹¡']\n\t\t\tfor (const breakPoint of breakPoints) {\n\t\t\t\tconst index = simplified.indexOf(breakPoint)\n\t\t\t\tif (index !== -1 && index < 15) {\n\t\t\t\t\tsimplified = simplified.substring(0, index + breakPoint.length)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// å¦‚æœä»ç„¶è¿‡é•¿ï¼Œç›´æ¥æˆªæ–­\n\t\t\tif (simplified.length > 20) {\n\t\t\t\tsimplified = simplified.substring(0, 18) + '...'\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn simplified\n\t}\n\n\t// æ ¹æ®åˆ†ç±»åç§°è·å–é»˜è®¤å›¾æ ‡\n\tconst getDefaultCategoryIcon = (cateName) => {\n\t\t// å®šä¹‰å¸¸è§åˆ†ç±»çš„é»˜è®¤å›¾æ ‡æ˜ å°„\n\t\tconst iconMap = {\n\t\t\t'å® ç‰©ç”¨å“': '/static/images/category/pet.png',\n\t\t\t'æ°´æ¯é¤å…·': '/static/images/category/tableware.png',\n\t\t\t'æ—¥ç”¨ç™¾è´§': '/static/images/category/daily.png',\n\t\t\t'æ¸…æ´å·¥å…·': '/static/images/category/cleaning.png',\n\t\t\t'æ”¶çº³æ•´ç†': '/static/images/category/storage.png',\n\t\t\t'æ–‡å…·æ•™å…·': '/static/images/category/stationery.png',\n\t\t\t'ç•œç‰§å†œèµ„': '/static/images/category/agriculture.png',\n\t\t\t'çº¸å“æ¹¿å·¾': '/static/images/category/tissue.png',\n\t\t\t'ä¸ªäººæŠ¤ç†': '/static/images/category/personal.png',\n\t\t\t'å¨æˆ¿çƒ¹é¥ª': '/static/images/category/kitchen.png',\n\t\t\t'èŠ‚åº†ç¤¼å“': '/static/images/category/gift.png',\n\t\t\t'å›¾ä¹¦ä¹å™¨': '/static/images/category/book.png',\n\t\t\t'å®¶åº­æ¸…æ´': '/static/images/category/home.png',\n\t\t\t'èŠ±å‰å›­è‰º': '/static/images/category/garden.png',\n\t\t\t'é”…å…·æ°´å£¶': '/static/images/category/pot.png'\n\t\t}\n\t\t\n\t\t// è¿”å›å¯¹åº”çš„å›¾æ ‡ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…é¡¹åˆ™è¿”å›é»˜è®¤å›¾æ ‡\n\t\treturn iconMap[cateName] || getDefaultImage('default') // ä½¿ç”¨åŸŸåé…ç½®ä¸­çš„é»˜è®¤å›¾ç‰‡è·¯å¾„\n\t}\n\n\t// ä¿®æ”¹å›¾ç‰‡é€‰æ‹©å’Œä¸Šä¼ æ–¹æ³•\n\tconst chooseAndUploadImage = async () => {\n\t\ttry {\n\t\t\t// ç§»é™¤å›¾ç‰‡æ•°é‡é™åˆ¶æ£€æŸ¥\n\t\t\t// é€‰æ‹©å›¾ç‰‡ï¼Œè®¾ç½® sizeType åªåŒ…å« original æ¥é€‰æ‹©åŸå›¾\n\t\t\tconst chooseRes = await uni.chooseImage({\n\t\t\t\tcount: 9, // ä¿ç•™æ­¤å‚æ•°ä½†ä¸å†åšå‰ç½®æ£€æŸ¥\n\t\t\t\tsizeType: ['original'], // åªä½¿ç”¨åŸå›¾\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tmediaType: ['image'] // åªé€‰æ‹©å›¾ç‰‡ï¼Œéšè—è§†é¢‘\n\t\t\t})\n\n\t\t\t// ä¸Šä¼ æ‰€æœ‰é€‰ä¸­çš„å›¾ç‰‡\n\t\t\tconst uploadPromises = chooseRes.tempFilePaths.map(async (filePath, index) => {\n\t\t\t\t// åˆ›å»ºä¸´æ—¶å›¾ç‰‡å¯¹è±¡å¹¶æ·»åŠ åˆ°é¢„è§ˆåˆ—è¡¨\n\t\t\t\tconst newIndex = imageList.value.length\n\t\t\t\timageList.value.push({\n\t\t\t\t\tfileURL: '',\n\t\t\t\t\tthumbnailURL: filePath,\n\t\t\t\t\tprogress: 0\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// è·å–å›¾ç‰‡ä¿¡æ¯ï¼ˆå®½é«˜ï¼‰ç”¨äºæ°´å°å¤§å°è°ƒæ•´\n\t\t\t\t\tconst imageInfo = await uni.getImageInfo({\n\t\t\t\t\t\tsrc: filePath\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.error('è·å–å›¾ç‰‡å°ºå¯¸ä¿¡æ¯å¤±è´¥:', err)\n\t\t\t\t\t\treturn { width: 0, height: 0 } // å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// è·å–ä¸Šä¼ é…ç½®\n\t\t\t\t\tconst uploadOptions = await extStorageCo.getUploadFileOptions({\n\t\t\t\t\t\tcloudPath: `images/${userStore.userInfo.uid}/${Date.now()}-${newIndex}.jpg`,\n\t\t\t\t\t\tfileType: 'image',\n\t\t\t\t\t\tisOriginal: true,\n\t\t\t\t\t\tuserNickName: userStore.userInfo.nickName,\n\t\t\t\t\t\timageWidth: imageInfo.width, // ä¼ é€’å›¾ç‰‡å®½åº¦\n\t\t\t\t\t\timageHeight: imageInfo.height // ä¼ é€’å›¾ç‰‡é«˜åº¦\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// åˆ›å»ºå¤‡ç”¨è¿›åº¦å®šæ—¶å™¨ï¼ˆå¦‚æœonProgressUpdateä¸å·¥ä½œï¼‰\n\t\t\t\t\tlet fallbackTimer = null;\n\t\t\t\t\tlet fallbackActive = true;\n\t\t\t\t\t\n\t\t\t\t\t// å¯åŠ¨å¤‡ç”¨è¿›åº¦åŠ¨ç”» - ä»…å½“å®é™…è¿›åº¦å›è°ƒæœªå·¥ä½œæ—¶ä½¿ç”¨\n\t\t\t\t\tfallbackTimer = setTimeout(function setupFallback() {\n\t\t\t\t\t\tif (!fallbackActive) return;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// è·å–å½“å‰è¿›åº¦\n\t\t\t\t\t\tconst currentProgress = imageList.value[newIndex]?.progress || 0;\n\t\t\t\t\t\tif (currentProgress >= 98) {\n\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// è®¡ç®—ä¸‹ä¸€ä¸ªè¿›åº¦å€¼ - ç¼“æ…¢ä¸Šå‡ï¼Œé¿å…è¶…è¿‡å®é™…è¿›åº¦è¿‡å¤š\n\t\t\t\t\t\tlet nextProgress;\n\t\t\t\t\t\tif (currentProgress < 30) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 5;\n\t\t\t\t\t\t} else if (currentProgress < 70) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 3;\n\t\t\t\t\t\t} else if (currentProgress < 90) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// æ›´æ–°è¿›åº¦ï¼Œæœ€å¤§98%\n\t\t\t\t\t\timageList.value[newIndex].progress = Math.min(98, nextProgress);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// ç»§ç»­ä¸‹ä¸€ä¸ªæ›´æ–°\n\t\t\t\t\t\tfallbackTimer = setTimeout(setupFallback, 800);\n\t\t\t\t\t}, 500);\n\t\t\t\t\t\n\t\t\t\t\t// æ‰§è¡Œä¸Šä¼ \n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tconst uploadTask = uni.uploadFile({\n\t\t\t\t\t\t\t...uploadOptions.uploadFileOptions,\n\t\t\t\t\t\t\tfilePath: filePath,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t// å–æ¶ˆå¤‡ç”¨å®šæ—¶å™¨\n\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// æ›´æ–°ä¸Šä¼ æˆåŠŸåçš„æ–‡ä»¶ä¿¡æ¯ï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\t\t\t\t\t\timageList.value[newIndex].progress = 100;\n\t\t\t\t\t\t\t\timageList.value[newIndex].fileURL = fixImageUrl(uploadOptions.fileURL);\n\t\t\t\t\t\t\t\timageList.value[newIndex].compressedURL = fixImageUrl(uploadOptions.compressedURL);\n\t\t\t\t\t\t\t\timageList.value[newIndex].thumbnailURL = fixImageUrl(uploadOptions.thumbnailURL);\n\t\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t// å–æ¶ˆå¤‡ç”¨å®šæ—¶å™¨\n\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.error(\"ä¸Šä¼ å¤±è´¥\", err);\n\t\t\t\t\t\t\t\timageList.value.splice(newIndex, 1);\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// å°è¯•ä½¿ç”¨å®é™…ä¸Šä¼ è¿›åº¦æ›´æ–°ï¼ˆå¦‚æœå¹³å°æ”¯æŒï¼‰\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tuploadTask.onProgressUpdate((res) => {\n\t\t\t\t\t\t\t\tif (res && typeof res.progress === 'number') {\n\t\t\t\t\t\t\t\t\t// æ”¶åˆ°å®é™…è¿›åº¦ï¼Œåœç”¨å¤‡ç”¨è¿›åº¦\n\t\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// æ›´æ–°å®é™…è¿›åº¦ï¼Œæœ€å¤§99%ï¼ˆä¿ç•™1%ç»™æœåŠ¡å™¨å¤„ç†é˜¶æ®µï¼‰\n\t\t\t\t\t\t\t\t\tconst actualProgress = Math.min(99, res.progress);\n\t\t\t\t\t\t\t\t\timageList.value[newIndex].progress = actualProgress;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (progressErr) {\n\t\t\t\t\t\t\tconsole.log('è¿›åº¦æ›´æ–°å›è°ƒä¸å¯ç”¨ï¼Œä½¿ç”¨å¤‡ç”¨è¿›åº¦æ˜¾ç¤º', progressErr);\n\t\t\t\t\t\t\t// ç»§ç»­ä½¿ç”¨å¤‡ç”¨è¿›åº¦å®šæ—¶å™¨\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// å¤„ç†å•ä¸ªå›¾ç‰‡ä¸Šä¼ é”™è¯¯\n\t\t\t\t\timageList.value.splice(newIndex, 1);\n\t\t\t\t\tconsole.error('ä¸Šä¼ å›¾ç‰‡é”™è¯¯:', err);\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// ç­‰å¾…æ‰€æœ‰ä¸Šä¼ å®Œæˆ\n\t\t\tawait Promise.all(uploadPromises);\n\t\t} catch (err) {\n\t\t\t// ä»…åœ¨å‡ºé”™æ—¶æ˜¾ç¤ºæç¤º\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ä¸Šä¼ å¤±è´¥',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\tconsole.error('å›¾ç‰‡ä¸Šä¼ è¿‡ç¨‹é”™è¯¯:', err);\n\t\t}\n\t}\n\n\t// åˆ é™¤å›¾ç‰‡æ–¹æ³•\n\tconst deleteImage = (index) => {\n\t\timageList.value.splice(index, 1)\n\t}\n\n\t// ä¿®æ”¹è§†é¢‘é€‰æ‹©æ–¹æ³•ï¼Œæ·»åŠ è‡ªåŠ¨ä¿å­˜åŠŸèƒ½\n\tconst handleVideoLinkInput = (e) => {\n\t  // åœ¨è¾“å…¥æ—¶è‡ªåŠ¨éªŒè¯å¹¶ä¿å­˜é“¾æ¥\n\t  const currentLink = videoLink.value.trim();\n\t  \n\t  // å¦‚æœé“¾æ¥ä¸ºç©ºï¼Œåˆ™æ¸…ç©ºè§†é¢‘ä¿¡æ¯\n\t  if (!currentLink) {\n\t    videoInfo.value = null;\n\t    return;\n\t  }\n\t  \n\t  // ç®€å•éªŒè¯é“¾æ¥æ ¼å¼ï¼Œä½†ä¸æ˜¾ç¤ºé”™è¯¯æç¤º\n\t  const urlPattern = /^(https?:\\/\\/)?([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&=]*)?$/;\n\t  if (!urlPattern.test(currentLink)) {\n\t    return; // ä¸ç¬¦åˆé“¾æ¥æ ¼å¼ï¼Œä¸ä¿å­˜\n\t  }\n\t  \n\t  // è®¾ç½®è§†é¢‘é“¾æ¥\n\t  videoInfo.value = currentLink;\n\t  \n\t  // æä¾›è½»å¾®çš„åé¦ˆï¼ˆå¯é€‰ï¼‰\n\t  uni.vibrateShort && uni.vibrateShort({ type: 'light' });\n\t}\n\n\t// æ·»åŠ è§†é¢‘é“¾æ¥\n\tconst addVideoLink = () => {\n\t\tif (!validateVideoLink()) return\n\t\t\n\t\t// å¦‚æœå·²æœ‰è§†é¢‘ï¼Œä¸å…è®¸å†æ¬¡æ·»åŠ \n\t\tif (videoInfo.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'åªèƒ½æ·»åŠ ä¸€ä¸ªè§†é¢‘',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// è®¾ç½®è§†é¢‘é“¾æ¥\n\t\tvideoInfo.value = videoLink.value.trim()\n\t\t\n\t\t// æ¸…ç©ºè¾“å…¥æ¡†\n\t\tvideoLink.value = ''\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: 'è§†é¢‘é“¾æ¥å·²æ·»åŠ ',\n\t\t\ticon: 'success',\n\t\t\tduration: 1500\n\t\t})\n\t}\n\n\t// æ·»åŠ åˆ é™¤è§†é¢‘çš„æ–¹æ³•\n\tconst deleteVideo = () => {\n\t\tvideoInfo.value = null\n\t}\n\n\t// æ·»åŠ ç¼–è¾‘æ¨¡å¼ç›¸å…³å˜é‡\n\tconst isEditMode = ref(false)\n\tconst editArticleId = ref('')\n\n\t// æ·»åŠ onLoadç”Ÿå‘½å‘¨æœŸ\n\tonLoad((options) => {\n\t\tconsole.log('é¡µé¢åŠ è½½å‚æ•°:', options)\n\t\t// æ£€æŸ¥æ˜¯å¦æ˜¯ç¼–è¾‘æ¨¡å¼\n\t\tif (options.mode === 'edit' && options.article_id) {\n\t\t\tisEditMode.value = true\n\t\t\teditArticleId.value = options.article_id\n\t\t\t// å…ˆè·å–åˆ†ç±»ï¼Œå†åŠ è½½æ–‡ç« æ•°æ®\n\t\t\tgetLocaAndCate().then(() => {\n\t\t\t\tloadArticleData()\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error('è·å–åˆ†ç±»å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è·å–åˆ†ç±»å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\t// éç¼–è¾‘æ¨¡å¼ï¼Œåªè·å–åˆ†ç±»\n\t\t\tgetLocaAndCate().catch(err => {\n\t\t\t\tconsole.error('è·å–åˆ†ç±»å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è·å–åˆ†ç±»å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t})\n\n\t// åŠ è½½æ–‡ç« æ•°æ®\n\tconst loadArticleData = async () => {\n\t\ttry {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'åŠ è½½ä¸­...',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\t\n\t\t\tconst res = await articleApi.getArticleDetal(editArticleId.value)\n\t\t\t\n\t\t\tif (!res || !res.articleRes || !res.articleRes.data || !res.articleRes.data[0]) {\n\t\t\t\tthrow new Error('è·å–æ–‡ç« æ•°æ®å¤±è´¥')\n\t\t\t}\n\t\t\t\n\t\t\tconst articleData = res.articleRes.data[0]\n\t\t\t\n\t\t\t// è®¾ç½®æ–‡ç« å†…å®¹\n\t\t\tcontent.value = articleData.content || ''\n\t\t\t\n\t\t\t// è®¾ç½®åˆ†ç±»\n\t\t\tif (articleData.cate_id) {\n\t\t\t\tselectedCategory.value = articleData.cate_id\n\t\t\t\tconst categoryIndex = categoryList.value.findIndex(cate => cate._id === articleData.cate_id)\n\t\t\t\tif (categoryIndex !== -1) {\n\t\t\t\t\tcateIndex.value = categoryIndex\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// è®¾ç½®å›¾ç‰‡åˆ—è¡¨ï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\tif (articleData.images && articleData.images.length > 0) {\n\t\t\t\timageList.value = articleData.images.map(img => ({\n\t\t\t\t\tfileURL: fixImageUrl(img.url || img),\n\t\t\t\t\tthumbnailURL: fixImageUrl(img.thumbnailURL || img.compressedURL || img.url || img),\n\t\t\t\t\tcompressedURL: fixImageUrl(img.compressedURL || img.url || img),\n\t\t\t\t\tprogress: 100\n\t\t\t\t}))\n\t\t\t}\n\t\t\t\n\t\t\t// è®¾ç½®è§†é¢‘ä¿¡æ¯\n\t\t\tif (articleData.videoURL) {\n\t\t\t\tvideoInfo.value = articleData.videoURL\n\t\t\t}\n\t\t\t\n\t\t\t// è®¾ç½®ä½ç½®ä¿¡æ¯\n\t\t\tlocationInfo.value = {\n\t\t\t\taddress: articleData.address || 'æœªçŸ¥åœ°å€',\n\t\t\t\tdistrict: articleData.district || 'æœªçŸ¥åŒºåŸŸ'\n\t\t\t}\n\t\t\t\n\t\t} catch (err) {\n\t\t\tconsole.error('åŠ è½½æ–‡ç« æ•°æ®å¤±è´¥:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'åŠ è½½æ–‡ç« æ•°æ®å¤±è´¥',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\n\t// ä¿®æ”¹æäº¤è¡¨å•æ–¹æ³•\n\tconst submitForm = async () => {\n\t\tif (!content.value.trim()) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'è¯·è¾“å…¥å†…å®¹',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tif (!selectedCategory.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'è¯·é€‰æ‹©åˆ†ç±»',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\t// å¦‚æœæ²¡æœ‰åˆ†ç±»ï¼Œå°è¯•é‡æ–°è·å–\n\t\t\tif (!categoryList.value.length || categoryList.value[0]._id === 'default') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'æç¤º',\n\t\t\t\t\tcontent: 'æœªèƒ½è·å–åˆ°åˆ†ç±»ä¿¡æ¯ï¼Œæ˜¯å¦é‡æ–°è·å–ï¼Ÿ',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tretryGetCategories()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif (!locationInfo.value || !locationInfo.value.address) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'æœªèƒ½è·å–ä½ç½®ä¿¡æ¯',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tuni.showLoading({\n\t\t\ttitle: isEditMode.value ? 'æ›´æ–°ä¸­...' : 'å‘å¸ƒä¸­...',\n\t\t\tmask: false\n\t\t})\n\n\t\ttry {\n\t\t\t\t\t// è·å–æ‰€æœ‰å·²ä¸Šä¼ å®Œæˆçš„å›¾ç‰‡URLï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\tconst uploadedImages = imageList.value\n\t\t\t\t.filter(img => img.fileURL && img.progress === 100)\n\t\t\t\t.map(img => ({\n\t\t\t\t\turl: fixImageUrl(img.fileURL),\n\t\t\t\t\tcompressedURL: fixImageUrl(img.compressedURL),\n\t\t\t\t\tthumbnailURL: fixImageUrl(img.thumbnailURL)\n\t\t\t\t}))\n\n\t\t\t// ç›´æ¥ä½¿ç”¨videoURLå­—æ®µ\n\t\t\tconst videoURL = videoInfo.value || null\n\t\t\t\n\t\t\t// è·å–é€‰ä¸­çš„åˆ†ç±»ä¿¡æ¯\n\t\t\tconst selectedCategoryInfo = categoryList.value.find(cate => cate._id === selectedCategory.value) || null\n\t\t\t// æ£€æŸ¥æ˜¯å¦æ˜¯åŸºäºä½ç½®çš„åˆ†ç±»\n\t\t\tconst isLocationBasedCategory = selectedCategoryInfo && selectedCategoryInfo.is_location_based === true\n\n\t\t\tconst params = {\n\t\t\t\tuser_id: userStore.userInfo.uid,\n\t\t\t\tcontent: content.value.trim(),\n\t\t\t\timages: uploadedImages,\n\t\t\t\tvideoURL: videoURL,\n\t\t\t\tcate_id: selectedCategory.value,\n\t\t\t\taddress: locationInfo.value.address || 'æœªçŸ¥åœ°å€',\n\t\t\t\tdistrict: locationInfo.value.district || 'æœªçŸ¥åŒºåŸŸ',\n\t\t\t\tuser_nickName: userStore.userInfo.nickName,\n\t\t\t\tuser_avatarUrl: userStore.userInfo.avatarUrl,\n\t\t\t\tuser_mobile: userStore.userInfo.mobile,\n\t\t\t\tpay_amount: payAmount.value || 0,\n\t\t\t\tis_location_based_category: isLocationBasedCategory,\n\t\t\t\tcategory_info: selectedCategoryInfo ? {\n\t\t\t\t\tname: selectedCategoryInfo.cate_name,\n\t\t\t\t\tis_location_based: selectedCategoryInfo.is_location_based || false,\n\t\t\t\t\tlocation_district: selectedCategoryInfo.location_district || null,\n\t\t\t\t\ticon: selectedCategoryInfo.icon || null,\n\t\t\t\t\tcate_img: selectedCategoryInfo.cate_img || selectedCategoryInfo.icon || null\n\t\t\t\t} : null\n\t\t\t}\n\n\t\t\tlet res\n\t\t\tif (isEditMode.value) {\n\t\t\t\t// æ›´æ–°æ–‡ç« \n\t\t\t\tres = await articleApi.updateArticle(editArticleId.value, params)\n\t\t\t} else {\n\t\t\t\t// å‘å¸ƒæ–°æ–‡ç« \n\t\t\t\tres = await articleApi.addArticle(params)\n\t\t\t}\n\n\t\t\tif (res.id || res.code === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: isEditMode.value ? 'æ›´æ–°æˆåŠŸ' : 'å‘å¸ƒæˆåŠŸ',\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\tdelta: 1,\n\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\tuni.$emit('globalRefresh', { \n\t\t\t\t\t\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\t\t\t\t\t\tpages: ['index', 'userArticleList', 'articleDetail']\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tconsole.log('è§¦å‘å…¨å±€åˆ·æ–°äº‹ä»¶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthrow new Error(res.message || (isEditMode.value ? 'æ›´æ–°å¤±è´¥' : 'å‘å¸ƒå¤±è´¥'))\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(isEditMode.value ? 'æ›´æ–°å¤±è´¥:' : 'å‘å¸ƒå¤±è´¥:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: err.message || (isEditMode.value ? 'æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•' : 'å‘å¸ƒå¤±è´¥ï¼Œè¯·é‡è¯•'),\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\n\t// é€‰æ‹©åˆ†ç±»\n\tconst bindPickerChange = ( e ) => {\n\t\tconsole.log( e, 'åˆ†ç±»' )\n\t\tcateIndex.value = e.detail.value\n\t\tselectedCategory.value = categoryList.value[ e.detail.value ]._id\n\t}\n\n\t// ç›´æ¥é€‰æ‹©åˆ†ç±»\n\tconst selectCategory = (index) => {\n\t\tcateIndex.value = index\n\t\tselectedCategory.value = categoryList.value[index]._id\n\t\tconsole.log('é€‰æ‹©åˆ†ç±»:', categoryList.value[index].cate_name)\n\t}\n\n\t// ä½¿ç”¨ uni-app API æ§åˆ¶é”®ç›˜\n\tconst focusTextarea = () => {\n\t\t// å…ˆéšè—é”®ç›˜ï¼Œå†å»¶è¿Ÿæ˜¾ç¤ºï¼Œé¿å…é—ªçƒé—®é¢˜\n\t\tuni.hideKeyboard && uni.hideKeyboard()\n\t\t\n\t\tsetTimeout(() => {\n\t\t\ttextareaFocus.value = true\n\t\t\t\n\t\t\t// æ·»åŠ å…‰æ ‡ä½ç½®è®¾ç½® - é»˜è®¤å…‰æ ‡ç§»åˆ°å†…å®¹æœ«å°¾\n\t\t\tif (content.value) {\n\t\t\t\tselectionStart.value = content.value.length\n\t\t\t\tselectionEnd.value = content.value.length\n\t\t\t}\n\t\t\t\n\t\t\t// æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸï¼Œç¡®ä¿è¾“å…¥åŒºåŸŸåœ¨é”®ç›˜ä¸Šæ–¹\n\t\t\tadjustScrollPosition()\n\t\t}, 50)\n\t}\n\n\t// é€‰æ‹©æ”¯ä»˜é‡‘é¢\n\tconst onSelectPayAmount = (e) => {\n\t\tpayAmount.value = e.target.dataset.amount\n\t}\n\n\t// ç”Ÿæˆåˆ†ç±»å›¾æ ‡\n\tconst handleGenerateIcon = async (category) => {\n\t\ttry {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'ç”Ÿæˆå›¾æ ‡ä¸­...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// ç”Ÿæˆä¸´æ—¶å›¾æ ‡\n\t\t\tconst tempResult = await generateTempCategoryIcon(category.cate_name)\n\t\t\tif (tempResult && tempResult.tempFilePath) {\n\t\t\t\t// ç›´æ¥ä¸Šä¼ å’Œä¿å­˜å›¾æ ‡ï¼Œè·³è¿‡è‡ªå®šä¹‰è°ƒæ•´é¢æ¿\n\t\t\t\tcurrentEditingCategory = category\n\t\t\t\tpreviewImageUrl.value = tempResult.tempFilePath\n\t\t\t\t\n\t\t\t\t// ç›´æ¥ä¿å­˜å›¾æ ‡\n\t\t\t\tawait saveCustomIcon()\n\t\t\t} else {\n\t\t\t\tthrow new Error('ç”Ÿæˆä¸´æ—¶å›¾æ ‡å¤±è´¥')\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('ç”Ÿæˆå›¾æ ‡å¤±è´¥:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ç”Ÿæˆå›¾æ ‡å¤±è´¥',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\t\n\t// ç”Ÿæˆä¸´æ—¶é¢„è§ˆå›¾æ ‡\n\tconst generateTempCategoryIcon = async (categoryName) => {\n\t\ttry {\n\t\t\t// æ˜¾ç¤ºåŠ è½½ä¸­æç¤º\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'ç”Ÿæˆé¢„è§ˆä¸­...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// 1. æ ¹æ®åˆ†ç±»åç§°ç”ŸæˆèƒŒæ™¯è‰²å’Œå‰æ™¯è‰²ï¼ˆä¿æŒåŸæœ‰ä»£ç ï¼‰\n\t\t\tconst getColorFromName = (name) => {\n\t\t\t\t// ç®€å•å“ˆå¸Œç®—æ³•ç”Ÿæˆé¢œè‰²\n\t\t\t\tlet hash = 0;\n\t\t\t\tfor (let i = 0; i < name.length; i++) {\n\t\t\t\t\thash = name.charCodeAt(i) + ((hash << 5) - hash);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// ç”ŸæˆæŸ”å’Œçš„èƒŒæ™¯è‰² - ä½¿ç”¨HSLé¢œè‰²æ¨¡å‹ï¼Œä¿æŒè¾ƒé«˜äº®åº¦å’Œä½é¥±å’Œåº¦\n\t\t\t\tconst h = Math.abs(hash) % 360; // è‰²ç›¸\n\t\t\t\tconst s = 40 + (Math.abs(hash) % 30); // é¥±å’Œåº¦ 40-70%\n\t\t\t\tconst l = 75 + (Math.abs(hash) % 15); // äº®åº¦ 75-90%\n\t\t\t\t\n\t\t\t\t// å‰æ™¯è‰² - æ ¹æ®èƒŒæ™¯è‰²æ˜æš—ç¨‹åº¦é€‰æ‹©é»‘æˆ–ç™½æ–‡æœ¬\n\t\t\t\tconst foregroundColor = l > 65 ? '#333333' : '#FFFFFF';\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tbackground: `hsl(${h}, ${s}%, ${l}%)`,\n\t\t\t\t\tforeground: foregroundColor\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\t// 2. åˆ›å»ºCanvasç»˜åˆ¶å›¾æ ‡\n\t\t\tconst colors = getColorFromName(categoryName);\n\t\t\tconst canvasSize = 200; // ç”»å¸ƒå¤§å°\n\t\t\tconst iconSize = canvasSize;\n\t\t\t\n\t\t\t// åˆ›å»ºç¦»å±Canvas (Appå’Œå°ç¨‹åº)\n\t\t\tconst canvas = uni.createOffscreenCanvas({\n\t\t\t\ttype: '2d',\n\t\t\t\twidth: iconSize, \n\t\t\t\theight: iconSize\n\t\t\t})\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\n\t\t\t// ç»˜åˆ¶èƒŒæ™¯\n\t\t\tctx.fillStyle = colors.background;\n\t\t\tctx.fillRect(0, 0, iconSize, iconSize);\n\t\t\t\n\t\t\t// ç»˜åˆ¶è¾¹æ¡†\n\t\t\tctx.strokeStyle = 'rgba(0,0,0,0.1)';\n\t\t\tctx.lineWidth = 2;\n\t\t\tctx.strokeRect(2, 2, iconSize-4, iconSize-4);\n\t\t\t\n\t\t\t// ç»˜åˆ¶æ–‡å­— - åº”ç”¨å½“å‰åç§»å’Œå¤§å°è®¾ç½®\n\t\t\tconst firstChar = categoryName.charAt(0);\n\t\t\tctx.fillStyle = colors.foreground;\n\t\t\tconst fontSize = iconSize/2 * (textSize.value / 100);\n\t\t\tctx.font = `bold ${fontSize}px sans-serif`;\n\t\t\tctx.textAlign = 'center';\n\t\t\tctx.textBaseline = 'middle';\n\t\t\t\n\t\t\t// åº”ç”¨åç§»é‡ï¼Œé»˜è®¤ä½ç½®æ˜¯ä¸­å¿ƒç‚¹(iconSize/2, iconSize/2)\n\t\t\tconst textX = iconSize/2 + (textOffsetX.value * iconSize / 100);\n\t\t\tconst textY = iconSize/2 + (textOffsetY.value * iconSize / 100);\n\t\t\tctx.fillText(firstChar, textX, textY);\n\t\t\t\n\t\t\t// 3. å°†Canvasè½¬ä¸ºä¸´æ—¶å›¾ç‰‡\n\t\t\tconst tempFilePath = await new Promise((resolve, reject) => {\n\t\t\t\t// å¯¼å‡ºå›¾ç‰‡\n\t\t\t\tconst buffer = canvas.toDataURL('image/png')\n\t\t\t\t\n\t\t\t\t// å°†Base64è½¬ä¸ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶\n\t\t\t\tconst fs = uni.getFileSystemManager();\n\t\t\t\tconst tempFilePath = `${uni.env.USER_DATA_PATH}/temp_category_icon_${Date.now()}.png`;\n\t\t\t\t\n\t\t\t\t// ä¿å­˜Base64ä¸ºä¸´æ—¶æ–‡ä»¶\n\t\t\t\tconst base64Data = buffer.replace(/^data:image\\/\\w+;base64,/, '');\n\t\t\t\tfs.writeFile({\n\t\t\t\t\tfilePath: tempFilePath,\n\t\t\t\t\tdata: base64Data,\n\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\tsuccess: () => resolve(tempFilePath),\n\t\t\t\t\tfail: (err) => reject(new Error(`ä¿å­˜ä¸´æ—¶æ–‡ä»¶å¤±è´¥: ${JSON.stringify(err)}`))\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tuni.hideLoading();\n\t\t\t\n\t\t\t// è¿”å›ä¸´æ—¶æ–‡ä»¶è·¯å¾„å’Œé¢œè‰²ä¿¡æ¯\n\t\t\treturn { \n\t\t\t\ttempFilePath,\n\t\t\t\tcolors\n\t\t\t};\n\t\t\t\n\t\t} catch (error) {\n\t\t\tuni.hideLoading();\n\t\t\tconsole.error('ç”Ÿæˆä¸´æ—¶å›¾æ ‡å¤±è´¥:', error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// æ·»åŠ é‡è¯•è·å–åˆ†ç±»çš„æ–¹æ³•\n\tconst retryGetCategories = () => {\n\t\tuni.showToast({\n\t\t\ttitle: 'æ­£åœ¨é‡æ–°è·å–åˆ†ç±»...',\n\t\t\ticon: 'loading',\n\t\t\tduration: 2000\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tgetLocaAndCate()\n\t\t}, 1000)\n\t}\n\n\t// ç»„ä»¶åŠ è½½æ—¶è·å–ä½ç½®\n\tonMounted(() => {\n\t\tconsole.log('ç»„ä»¶å·²æŒ‚è½½')\n\t\tisInSelectionMode.value = false\n\t\t\n\t\t// å¦‚æœä¸æ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œåˆ™è·å–åˆ†ç±»\n\t\tif (!isEditMode.value) {\n\t\t\tgetLocaAndCate().catch(err => {\n\t\t\t\tconsole.error('onMountedè·å–åˆ†ç±»å¤±è´¥:', err)\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'æç¤º',\n\t\t\t\t\tcontent: 'è·å–åˆ†ç±»å¤±è´¥ï¼Œæ˜¯å¦é‡è¯•ï¼Ÿ',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tretryGetCategories()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t})\n\n\t// æ·»åŠ åˆ›å»ºæ–°åˆ†ç±»å›¾æ ‡çš„æ–¹æ³•\n\tconst createNewCategoryIcon = () => {\n\t\tif (categoryList.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'æ²¡æœ‰å¯ç”¨åˆ†ç±»',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// å¦‚æœå·²é€‰æ‹©åˆ†ç±»ï¼Œä¸ºè¯¥åˆ†ç±»ç”Ÿæˆå›¾æ ‡\n\t\tif (categoryList.value[cateIndex.value]) {\n\t\t\thandleGenerateIcon(categoryList.value[cateIndex.value])\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåˆ†ç±»',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t}\n\t}\n\n\t// æ£€æŸ¥URLæ˜¯å¦æœ‰æ•ˆå›¾ç‰‡URL\n\tconst isValidImageUrl = (url) => {\n\t\t// å¦‚æœURLä¸ºç©ºæˆ–ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œä¸æ˜¯æœ‰æ•ˆURL\n\t\tif (!url || url.trim() === '') return false;\n\t\t\n\t\t// æ£€æŸ¥æ˜¯å¦æ˜¯é»˜è®¤å›¾ç‰‡\n\t\tif (url.includes('default.png')) return false;\n\t\t\n\t\t// æ£€æŸ¥æ˜¯å¦æ˜¯æœ¬åœ°é™æ€èµ„æºè·¯å¾„ï¼ˆéæœ‰æ•ˆçš„è¿œç¨‹URLï¼‰\n\t\tif (url.startsWith('/static/')) return false;\n\t\t\n\t\ttry {\n\t\t\t// å°è¯•è§£æURLï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æ•ˆ\n\t\t\tconst parsedUrl = new URL(url);\n\t\t\t// æ£€æŸ¥æ˜¯å¦æ˜¯HTTP/HTTPSåè®®\n\t\t\treturn parsedUrl.protocol === 'http:' || parsedUrl.protocol === 'https:';\n\t\t} catch (e) {\n\t\t\t// è§£æå¤±è´¥ï¼Œä¸æ˜¯æœ‰æ•ˆURL\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// å¤„ç†æ–‡æœ¬æ¡†ç„¦ç‚¹äº‹ä»¶\n\tconst handleTextareaFocus = () => {\n\t\ttextareaFocus.value = true\n\t\t// è°ƒæ•´æ»šåŠ¨ä½ç½®ç¡®ä¿è¾“å…¥åŒºåŸŸå¯è§\n\t\tadjustScrollPosition()\n\t}\n\n\t// å¤„ç†æ–‡æœ¬æ¡†è¡Œæ•°å˜åŒ–\n\tconst handleLineChange = (e) => {\n\t\t// è·å–å½“å‰è¡Œæ•°\n\t\tconst lineCount = e.detail.lineCount || 1;\n\t\tconst minHeight = 170; // æœ€å°é«˜åº¦ 170rpx\n\t\tconst lineHeight = 40; // æ¯è¡Œå¤§çº¦40rpx\n\t\tconst maxHeight = 800; // æœ€å¤§é«˜åº¦é™åˆ¶\n\t\t\n\t\t// è®¡ç®—ç†æƒ³é«˜åº¦ï¼šæ¯è¡Œ40rpxï¼ŒåŠ ä¸Šä¸Šä¸‹paddingå„20rpx\n\t\tlet idealHeight = Math.max(minHeight, (lineCount * lineHeight) + 40);\n\t\t\n\t\t// é™åˆ¶æœ€å¤§é«˜åº¦\n\t\tidealHeight = Math.min(idealHeight, maxHeight);\n\t\t\n\t\t// åªæœ‰å½“é«˜åº¦å˜åŒ–æ˜¾è‘—æ—¶æ‰è°ƒæ•´ä½ç½®\n\t\tif (Math.abs(inputHeight.value - idealHeight) > 10) {\n\t\t\tinputHeight.value = idealHeight;\n\t\t\t\n\t\t\t// ä½¿ç”¨èŠ‚æµå‡½æ•°å»¶è¿Ÿè°ƒç”¨adjustScrollPosition\n\t\t\tclearTimeout(window.scrollAdjustTimer);\n\t\t\twindow.scrollAdjustTimer = setTimeout(() => {\n\t\t\t\tadjustScrollPosition();\n\t\t\t}, 100);\n\t\t}\n\t}\n\t\n\t// å¯ç”¨å…‰æ ‡æ‹–åŠ¨æ¨¡å¼\n\tconst enableCursorDrag = (e) => {\n\t\t// ç¡®ä¿æ–‡æœ¬åŒºåŸŸè·å¾—ç„¦ç‚¹\n\t\ttextareaFocus.value = true\n\t\t\n\t\t// è®¾ç½®ä¸ºé€‰æ‹©æ¨¡å¼\n\t\tisInSelectionMode.value = true\n\t\t\n\t\t// ç®€å•æç¤ºç”¨æˆ·\n\t\tuni.showToast({\n\t\t\ttitle: 'é•¿æŒ‰é€‰æ‹©æ–‡æœ¬è¿›è¡Œç¼–è¾‘',\n\t\t\ticon: 'none',\n\t\t\tduration: 1500\n\t\t})\n\t\t\n\t\t// é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œé˜²æ­¢è™šæ‹Ÿé”®ç›˜å¼¹å‡º\n\t\tsetTimeout(() => {\n\t\t\tuni.hideKeyboard && uni.hideKeyboard()\n\t\t}, 100)\n\t}\n\n\t// æ›´æ–°å›¾æ ‡é¢„è§ˆ\n\tconst updateIconPreview = async () => {\n\t\tif (!currentEditingCategory) return;\n\t\t\n\t\ttry {\n\t\t\tconst tempResult = await generateTempCategoryIcon(currentEditingCategory.cate_name);\n\t\t\tif (tempResult && tempResult.tempFilePath) {\n\t\t\t\tpreviewImageUrl.value = tempResult.tempFilePath;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('æ›´æ–°é¢„è§ˆå¤±è´¥:', error);\n\t\t}\n\t}\n\t\n\t// ä¿å­˜è‡ªå®šä¹‰å›¾æ ‡\n\tconst saveCustomIcon = async () => {\n\t\tif (!currentEditingCategory || !previewImageUrl.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'æ²¡æœ‰å¯ä¿å­˜çš„å›¾æ ‡',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttry {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'ä¿å­˜ä¸­...',\n\t\t\t\tmask: false\n\t\t\t});\n\t\t\t\n\t\t\t// ä¸Šä¼ åˆ°äº‘å­˜å‚¨\n\t\t\tconst uploadResult = await extStorageCo.getUploadFileOptions({\n\t\t\t\tcloudPath: `categories/${currentEditingCategory._id || Date.now()}.png`,\n\t\t\t\tfileType: 'image',\n\t\t\t\tisOriginal: true\n\t\t\t});\n\t\t\t\n\t\t\t// æ‰§è¡Œä¸Šä¼ \n\t\t\tconst uploadRes = await uni.uploadFile({\n\t\t\t\t...uploadResult.uploadFileOptions,\n\t\t\t\tfilePath: previewImageUrl.value,\n\t\t\t\tname: 'file'\n\t\t\t});\n\t\t\t\n\t\t\tif (uploadRes.statusCode !== 200) {\n\t\t\t\tthrow new Error(`ä¸Šä¼ å¤±è´¥: ${uploadRes.statusCode}`);\n\t\t\t}\n\t\t\t\n\t\t\t\t\t// è·å–å›¾ç‰‡URLï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\tconst iconURL = fixImageUrl(uploadResult.fileURL);\n\t\t\tconst thumbnailURL = fixImageUrl(uploadResult.thumbnailURL);\n\t\t\t\n\t\t\t// æ›´æ–°æ•°æ®åº“ä¸­çš„åˆ†ç±»å›¾æ ‡URL\n\t\t\tif (currentEditingCategory._id) {\n\t\t\t\ttry {\n\t\t\t\t\t// å°è¯•è°ƒç”¨äº‘å‡½æ•°æ›´æ–°å›¾æ ‡\n\t\t\t\t\tconst updateResult = await extStorageCo.updateCategoryIcon({\n\t\t\t\t\t\tcategoryId: currentEditingCategory._id, \n\t\t\t\t\t\ticonURL,\n\t\t\t\t\t\tthumbnailURL\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.warn('äº‘å‡½æ•°updateCategoryIconå¯èƒ½æœªéƒ¨ç½²æˆ–ä¸å¯ç”¨:', err);\n\t\t\t\t\t\treturn { updated: false, error: err.message };\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// å¦‚æœäº‘å‡½æ•°è°ƒç”¨æˆåŠŸ\n\t\t\t\t\tif (updateResult && updateResult.updated) {\n\t\t\t\t\t\tconsole.log('æ›´æ–°åˆ†ç±»å›¾æ ‡ç»“æœ:', updateResult);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// æ›´æ–°æœ¬åœ°åˆ†ç±»å›¾æ ‡ï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\t\t\t\tcurrentEditingCategory.icon = fixImageUrl(iconURL);\n\t\t\t\t\t\tcurrentEditingCategory.cate_img = fixImageUrl(iconURL);\n\t\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = fixImageUrl(thumbnailURL);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// å…³é—­è‡ªå®šä¹‰é¢æ¿\n\t\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'å›¾æ ‡ä¿å­˜æˆåŠŸ',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// äº‘å‡½æ•°æœªèƒ½æ­£ç¡®æ‰§è¡Œï¼Œä½†æˆ‘ä»¬ä»ç„¶æ›´æ–°æœ¬åœ°å›¾æ ‡\n\t\t\t\t\t\tconsole.warn('æ›´æ–°åˆ†ç±»å›¾æ ‡æœªæˆåŠŸï¼Œä½†å›¾æ ‡å·²ç”Ÿæˆ:', {iconURL, thumbnailURL});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// æ›´æ–°æœ¬åœ°åˆ†ç±»å›¾æ ‡ï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\t\t\t\tcurrentEditingCategory.icon = fixImageUrl(iconURL);\n\t\t\t\t\t\tcurrentEditingCategory.cate_img = fixImageUrl(iconURL);\n\t\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = fixImageUrl(thumbnailURL);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// å…³é—­è‡ªå®šä¹‰é¢æ¿\n\t\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'å›¾æ ‡å·²ç”Ÿæˆ',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (updateError) {\n\t\t\t\t\t// æ›´æ–°æ•°æ®åº“å¤±è´¥ï¼Œä½†å›¾æ ‡å·²ä¸Šä¼ æˆåŠŸ\n\t\t\t\t\tconsole.error('æ›´æ–°åˆ†ç±»å›¾æ ‡æ•°æ®åº“è®°å½•å¤±è´¥:', updateError);\n\t\t\t\t\t\n\t\t\t\t\t// æ›´æ–°æœ¬åœ°åˆ†ç±»å›¾æ ‡ï¼Œä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°\n\t\t\t\t\tcurrentEditingCategory.icon = fixImageUrl(iconURL);\n\t\t\t\t\tcurrentEditingCategory.cate_img = fixImageUrl(iconURL);\n\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = fixImageUrl(thumbnailURL);\n\t\t\t\t\t\n\t\t\t\t\t// å…³é—­è‡ªå®šä¹‰é¢æ¿\n\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'å›¾æ ‡å·²ç”Ÿæˆï¼Œä½†æœªæ›´æ–°æ•°æ®åº“',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('ä¿å­˜å›¾æ ‡å¤±è´¥:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ä¿å­˜å›¾æ ‡å¤±è´¥',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t} finally {\n\t\t\tuni.hideLoading();\n\t\t}\n\t}\n\t\n\t// å–æ¶ˆè‡ªå®šä¹‰\n\tconst cancelCustomize = () => {\n\t\ticonCustomizing.value = false;\n\t\tcurrentEditingCategory = null;\n\t\tpreviewImageUrl.value = '';\n\t}\n\n\t// è°ƒæ•´æ»šåŠ¨ä½ç½®\n\tconst adjustScrollPosition = () => {\n\t\tnextTick(() => {\n\t\t\ttry {\n\t\t\t\t// è·å–å½“å‰è®¾å¤‡ä¿¡æ¯\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\t\t\tconst windowHeight = systemInfo.windowHeight;\n\t\t\t\tconst keyboardHeight = systemInfo.windowHeight * 0.4; // é”®ç›˜é«˜åº¦çº¦ä¸ºå±å¹•é«˜åº¦çš„40%\n\t\t\t\t\n\t\t\t\t// è·å–è¾“å…¥åŒºåŸŸä¿¡æ¯\n\t\t\t\tuni.createSelectorQuery()\n\t\t\t\t\t.select('.content-area')\n\t\t\t\t\t.boundingClientRect(rect => {\n\t\t\t\t\t\tif (!rect) return;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// è®¡ç®—è¾“å…¥åŒºåŸŸåº•éƒ¨åˆ°å±å¹•é¡¶éƒ¨çš„è·ç¦»\n\t\t\t\t\t\tconst inputBottom = rect.top + rect.height;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// è®¡ç®—ç†æƒ³çš„è¾“å…¥åŒºåŸŸä½ç½®\n\t\t\t\t\t\t// è®©è¾“å…¥åŒºåŸŸåº•éƒ¨ä½äºé”®ç›˜ä¸Šæ–¹ï¼Œç•™å‡ºä¸€å®šç©ºé—´(100rpx)\n\t\t\t\t\t\tconst idealPosition = inputBottom - (windowHeight - keyboardHeight) + (100 * (systemInfo.windowWidth / 750));\n\t\t\t\t\t\t\n\t\t\t\t\t\t// åªæœ‰å½“è¾“å…¥åŒºåŸŸè¢«é”®ç›˜é®æŒ¡æ—¶æ‰æ»šåŠ¨\n\t\t\t\t\t\tif (idealPosition > 0) {\n\t\t\t\t\t\t\t// è·å–å½“å‰é¡µé¢æ»šåŠ¨ä½ç½®\n\t\t\t\t\t\t\tlet currentScrollTop = 0;\n\t\t\t\t\t\t\tconst pages = getCurrentPages();\n\t\t\t\t\t\t\tconst currentPage = pages[pages.length - 1];\n\t\t\t\t\t\t\tif (currentPage && currentPage.$page) {\n\t\t\t\t\t\t\t\tcurrentScrollTop = currentPage.$page.scrollTop || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// è®¡ç®—æ–°çš„æ»šåŠ¨ä½ç½®ï¼Œç¡®ä¿å¹³æ»‘è¿‡æ¸¡\n\t\t\t\t\t\t\tconst newScrollTop = currentScrollTop + idealPosition;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// æ‰§è¡Œæ»šåŠ¨ï¼Œä½¿ç”¨è¾ƒçŸ­çš„åŠ¨ç”»æ—¶é—´\n\t\t\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\t\t\tscrollTop: newScrollTop,\n\t\t\t\t\t\t\t\tduration: 200, // å‡å°‘åŠ¨ç”»æ—¶é—´æé«˜å“åº”é€Ÿåº¦\n\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t// æ»šåŠ¨å®Œæˆåï¼Œç¡®ä¿å…‰æ ‡å¯è§\n\t\t\t\t\t\t\t\t\tnextTick(() => {\n\t\t\t\t\t\t\t\t\t\t// å¦‚æœéœ€è¦ï¼Œå¾®è°ƒæ»šåŠ¨ä½ç½®\n\t\t\t\t\t\t\t\t\t\tconst finalAdjustment = 50; // é¢å¤–çš„å¾®è°ƒè·ç¦»\n\t\t\t\t\t\t\t\t\t\tif (idealPosition > windowHeight / 3) {\n\t\t\t\t\t\t\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\t\t\t\t\t\t\tscrollTop: newScrollTop + finalAdjustment,\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 100\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t\t\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('è°ƒæ•´æ»šåŠ¨ä½ç½®å¤±è´¥:', err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// æ’å…¥æ–‡æœ¬åˆ°å…‰æ ‡ä½ç½®\n\tconst insertTextAtCursor = (textToInsert) => {\n\t\tif (!content.value) content.value = ''\n\t\t\n\t\t// æ’å…¥æ–‡æœ¬\n\t\tconst before = content.value.substring(0, selectionStart.value)\n\t\tconst after = content.value.substring(selectionEnd.value)\n\t\tcontent.value = before + textToInsert + after\n\t\t\n\t\t// æ›´æ–°å…‰æ ‡ä½ç½® - ç§»åŠ¨åˆ°æ’å…¥çš„æ–‡æœ¬ä¹‹å\n\t\tconst newPosition = selectionStart.value + textToInsert.length\n\t\t\n\t\t// å»¶è¿Ÿæ›´æ–°å…‰æ ‡ä½ç½®ï¼Œç¡®ä¿å†…å®¹å·²æ›´æ–°\n\t\tnextTick(() => {\n\t\t\tselectionStart.value = newPosition\n\t\t\tselectionEnd.value = newPosition\n\t\t\t\n\t\t\t// ç¡®ä¿æ–‡æœ¬åŒºåŸŸä»ç„¶å…·æœ‰ç„¦ç‚¹\n\t\t\ttextareaFocus.value = true\n\t  \n\t\t\t// è§¦å‘è¾“å…¥é«˜åº¦å˜åŒ–æ£€æµ‹\n\t\t\thandleLineChange({ detail: { lineCount: content.value.split('\\n').length } })\n\t\t})\n\t}\n\t\n\t// æ·»åŠ ä¸€ä¸ªä¿å­˜å…‰æ ‡ä½ç½®çš„å¤„ç†å‡½æ•°\n\tconst handleSelectionChange = (e) => {\n\t\tif (e.detail) {\n\t\t\t// è®°å½•é€‰åŒºä½ç½®\n\t\t\tselectionStart.value = e.detail.selectionStart || 0\n\t\t\tselectionEnd.value = e.detail.selectionEnd || 0\n\t\t\t\n\t\t\t// å¦‚æœæœ‰é€‰ä¸­å†…å®¹ï¼Œæ˜¾ç¤ºå­—æ•°\n\t\t\tif (selectionStart.value !== selectionEnd.value) {\n\t\t\t\t// å·²ç»æ˜¾ç¤ºåœ¨ç•Œé¢ä¸­\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// åº”ç”¨è‡ªå®šä¹‰é€‰æ‹©æ ·å¼ - ä¾‹å¦‚åœ¨é€‰æ‹©çš„æ–‡æœ¬ä¸‹æ–¹æ·»åŠ ç»†çº¿\n\tconst applyCustomSelectionStyle = () => {\n\t\t// ä¸ºäº†æ›´å¥½åœ°å…¼å®¹æ€§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå ä½å‡½æ•°\n\t\t// å®é™…æ ·å¼é€šè¿‡CSSå’Œclassæ§åˆ¶\n\t\t\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºç¯å¢ƒä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¦†ç›–å±‚æˆ–å…¶ä»–è§†è§‰æŒ‡ç¤º\n\t\t\n\t\t// æ³¨æ„ï¼šæŸäº›å¹³å°å¯èƒ½ä¸æ”¯æŒå¤æ‚çš„DOMæ“ä½œæˆ–CSSè‡ªå®šä¹‰\n\t\t\n\t\t// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸»è¦ä¾èµ–äºCSSå’Œç±»æ¥æ·»åŠ è§†è§‰åŒºåˆ†\n\t\tconsole.log('åº”ç”¨è‡ªå®šä¹‰é€‰æ‹©æ ·å¼')\n\t}\n\n\t// æ’å…¥å¸¸ç”¨çŸ­è¯­\n\tconst insertCommonPhrase = (phrase) => {\n\t\tinsertTextAtCursor(phrase)\n\t\t// æ’å…¥åè‡ªåŠ¨å…³é—­å·¥å…·æ \n\t\tshowFormatToolbar.value = false\n\t}\n\n\t// æ¸…ç©ºå…¨éƒ¨å†…å®¹\n\tconst clearContent = () => {\n\t\tuni.showModal({\n\t\t\ttitle: 'æç¤º',\n\t\t\tcontent: 'ç¡®å®šè¦æ¸…ç©ºå…¨éƒ¨å†…å®¹å—ï¼Ÿ',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tcontent.value = ''\n\t\t\t\t\t// èšç„¦åˆ°è¾“å…¥æ¡†\n\t\t\t\t\ttextareaFocus.value = true\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// åˆ‡æ¢è¡¨æƒ…é¢æ¿æ˜¾ç¤º\n\tconst toggleEmojiPanel = () => {\n\t\tshowEmojiPanel.value = !showEmojiPanel.value\n\t\tif (showEmojiPanel.value) {\n\t\t\t// å…³é—­æ ¼å¼å·¥å…·æ \n\t\t\tshowFormatToolbar.value = false\n\t\t}\n\t}\n\n\t// æ’å…¥è¡¨æƒ…ç¬¦å·\n\tconst insertEmoji = (emoji) => {\n\t\tinsertTextAtCursor(emoji)\n\t}\n\n\t// é€‰æ‹©è¡¨æƒ…åˆ†ç»„\n\tconst selectEmojiGroup = (index) => {\n\t\tcurrentEmojiGroupIndex.value = index\n\t}\n\n\t// å¢å¼ºæ–‡æœ¬é€‰æ‹©çš„ç„¦ç‚¹å’Œé€‰æ‹©æ§åˆ¶\n\tconst enhanceTextareaSelection = (e) => {\n\t  try {\n\t    // ç¡®ä¿å†…å®¹åŒºåŸŸå¯è§\n\t    adjustScrollPosition()\n\t    \n\t    // åˆ¤æ–­æ˜¯å¦éœ€è¦æ˜¾ç¤ºé”®ç›˜\n\t    const shouldShowKeyboard = e && e.type === 'click'\n\t    \n\t    if (shouldShowKeyboard) {\n\t      textareaFocus.value = true\n\t    }\n\t    \n\t    // è®°å½•æ–‡æœ¬åŒºåŸŸä½ç½®ç”¨äºåç»­ç²¾ç¡®é€‰æ‹©\n\t    if (e && (e.type === 'touchstart' || e.type === 'click')) {\n\t      // åœ¨å°ç¨‹åºä¸­è·å–å…ƒç´ ä¿¡æ¯\n\t      uni.createSelectorQuery()\n\t        .select('.content-input')\n\t        .boundingClientRect(data => {\n\t          if (data) {\n\t            // è®°å½•æ–‡æœ¬åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯\n\t            textAreaRect.value = {\n\t              left: data.left,\n\t              top: data.top,\n\t              width: data.width,\n\t              height: data.height\n\t            }\n\t          }\n\t        })\n\t        .exec()\n\t    }\n\t  } catch (err) {\n\t    console.log('å¢å¼ºæ–‡æœ¬é€‰æ‹©å¤±è´¥', err)\n\t  }\n\t}\n\n\t// å°†é•¿æŒ‰å˜æˆç²¾ç¡®é€‰æ‹©æ¨¡å¼\n\tconst enablePreciseSelection = (e) => {\n\t  // é˜²æ­¢é»˜è®¤é•¿æŒ‰èœå•\n\t  e.preventDefault && e.preventDefault()\n\t  \n\t  // æ˜¾ç¤ºè‡ªå®šä¹‰èœå•\n\t  uni.showActionSheet({\n\t    itemList: ['å…¨é€‰', 'å¤åˆ¶', 'ç²˜è´´', 'æ¸…ç©º'],\n\t    success: (res) => {\n\t      switch(res.tapIndex) {\n\t        case 0: // å…¨é€‰\n\t          // é€‰æ‹©å…¨éƒ¨æ–‡æœ¬\n\t          selectionStart.value = 0\n\t          selectionEnd.value = content.value.length\n\t          \n\t          // ç¡®ä¿æ–‡æœ¬åŒºåŸŸè·å¾—ç„¦ç‚¹\n\t          textareaFocus.value = true\n\t          \n\t          uni.showToast({\n\t            title: 'å·²å…¨é€‰',\n\t            icon: 'none',\n\t            duration: 1000\n\t          })\n\t          break\n\t          \n\t        case 1: // å¤åˆ¶\n\t          if (selectionStart.value !== selectionEnd.value) {\n\t            // å¤åˆ¶é€‰ä¸­å†…å®¹åˆ°å‰ªè´´æ¿\n\t            const selectedText = content.value.substring(selectionStart.value, selectionEnd.value)\n\t            uni.setClipboardData({\n\t              data: selectedText,\n\t              success: () => {\n\t                uni.showToast({\n\t                  title: 'å·²å¤åˆ¶',\n\t                  icon: 'success',\n\t                  duration: 1000\n\t                })\n\t              }\n\t            })\n\t          } else if (content.value) {\n\t            // å…¨éƒ¨å¤åˆ¶\n\t            uni.setClipboardData({\n\t              data: content.value,\n\t              success: () => {\n\t                uni.showToast({\n\t                  title: 'å·²å¤åˆ¶å…¨éƒ¨å†…å®¹',\n\t                  icon: 'success',\n\t                  duration: 1000\n\t                })\n\t              }\n\t            })\n\t          } else {\n\t            uni.showToast({\n\t              title: 'æ— å†…å®¹å¯å¤åˆ¶',\n\t              icon: 'none',\n\t              duration: 1000\n\t            })\n\t          }\n\t          break\n\t          \n\t        case 2: // ç²˜è´´\n\t          // ä»å‰ªè´´æ¿è·å–å†…å®¹å¹¶ç²˜è´´\n\t          uni.getClipboardData({\n\t            success: (res) => {\n\t              if (res.data) {\n\t                // åœ¨å½“å‰å…‰æ ‡ä½ç½®æ’å…¥å‰ªè´´æ¿å†…å®¹\n\t                insertTextAtCursor(res.data)\n\t                \n\t                uni.showToast({\n\t                  title: 'å·²ç²˜è´´',\n\t                  icon: 'success',\n\t                  duration: 1000\n\t                })\n\t              } else {\n\t                uni.showToast({\n\t                  title: 'å‰ªè´´æ¿ä¸ºç©º',\n\t                  icon: 'none',\n\t                  duration: 1000\n\t                })\n\t              }\n\t            }\n\t          })\n\t          break\n\t          \n\t        case 3: // æ¸…ç©º\n\t          // æ¸…ç©ºç¡®è®¤\n\t          uni.showModal({\n\t            title: 'æç¤º',\n\t            content: 'ç¡®å®šè¦æ¸…ç©ºå…¨éƒ¨å†…å®¹å—ï¼Ÿ',\n\t            success: (res) => {\n\t              if (res.confirm) {\n\t                content.value = ''\n\t                \n\t                // é‡æ–°è·å–ç„¦ç‚¹\n\t                setTimeout(() => {\n\t                  textareaFocus.value = true\n\t                }, 100)\n\t              }\n\t            }\n\t          })\n\t          break\n\t      }\n\t    }\n\t  })\n\t}\n\n\t// é€€å‡ºé€‰æ‹©æ¨¡å¼\n\tconst exitSelectionMode = () => {\n\t  // æ¸…é™¤é€‰æ‹©æ¨¡å¼æ ‡å¿—\n\t  isInSelectionMode.value = false\n\t  \n\t  // é€šçŸ¥ç”¨æˆ·\n\t  uni.showToast({\n\t    title: 'é€‰æ‹©å·²å®Œæˆ',\n\t    icon: 'none',\n\t    duration: 1500\n\t  })\n\t}\n\n\t// æ ¹æ®ç‚¹å‡»ä½ç½®è®¡ç®—å…‰æ ‡ä½ç½®\n\tconst getCursorPositionFromPoint = (x, y, text) => {\n\t  // uni-appç¯å¢ƒä¸­å¯èƒ½æ²¡æœ‰ç›´æ¥è®¿é—®documentå¯¹è±¡\n\t  // åˆ›å»ºä¸´æ—¶å…ƒç´ æ¥ä¼°ç®—å…‰æ ‡ä½ç½®\n\t  try {\n\t    // é€šè¿‡selectQueryè·å–textareaå…ƒç´ \n\t    uni.createSelectorQuery()\n\t      .select('.content-input')\n\t      .node(res => {\n\t        if (!res || !res.node) return 0\n\t        \n\t        // è·å–å®¹å™¨èŠ‚ç‚¹ä½œä¸ºå‚è€ƒ\n\t        const textNode = res.node\n\t        \n\t        // åˆ›å»ºä¸´æ—¶æ–‡æœ¬è®¡ç®—å·¥å…·\n\t        const getPositionFromText = (text, relX, relY) => {\n\t          // æ–‡æœ¬ä¸å­˜åœ¨åˆ™è¿”å›0\n\t          if (!text) return 0\n\t          \n\t          // ä½¿ç”¨å­—ç¬¦å¹³å‡å®½åº¦è¿›è¡Œä¼°ç®—\n\t          const avgCharWidth = 14 // å‡è®¾çš„å¹³å‡å­—ç¬¦å®½åº¦ï¼Œ28rpxçº¦ç­‰äº14px\n\t          const lineHeight = 21 // 1.5è¡Œé«˜ * 14px\n\t          \n\t          // è®¡ç®—ç‚¹å‡»ä½ç½®å¤§è‡´å¯¹åº”çš„å­—ç¬¦ç´¢å¼•\n\t          const approxLine = Math.floor(relY / lineHeight)\n\t          const lineWidth = textNode.offsetWidth || 300 // å‡è®¾å®½åº¦\n\t          const charsPerLine = Math.floor(lineWidth / avgCharWidth)\n\t          \n\t          // åŸºäºè¡Œæ•°å’Œç›¸å¯¹Xä½ç½®è®¡ç®—ç´¢å¼•\n\t          let approxIndex = (approxLine * charsPerLine) + Math.floor(relX / avgCharWidth)\n\t          \n\t          // ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…\n\t          approxIndex = Math.max(0, Math.min(approxIndex, text.length))\n\t          \n\t          // å°è¯•æ‰¾åˆ°æœ€æ¥è¿‘çš„å­—ç¬¦è¾¹ç•Œ\n\t          // ç‰¹åˆ«æ˜¯å¯¹äºCJKæ–‡å­—ï¼Œå¯èƒ½éœ€è¦æ›´å¤æ‚çš„é€»è¾‘\n\t          return approxIndex\n\t        }\n\t        \n\t        // è·å–ç›¸å¯¹äºæ–‡æœ¬åŒºçš„åæ ‡\n\t        uni.createSelectorQuery()\n\t          .select('.content-input')\n\t          .boundingClientRect(data => {\n\t            if (data) {\n\t              const relX = x - data.left\n\t              const relY = y - data.top\n\t              \n\t              // è®¡ç®—ä¼°ç®—ä½ç½®\n\t              const position = getPositionFromText(text, relX, relY)\n\t              \n\t              // è®¾ç½®é€‰ä¸­ä½ç½®\n\t              selectionStart.value = position\n\t              selectionEnd.value = position\n\t              \n\t              // ç›´æ¥åº”ç”¨åˆ°æ–‡æœ¬åŒº\n\t              if (textNode.setSelectionRange) {\n\t                textNode.setSelectionRange(position, position)\n\t                // ä¿å­˜å¼•ç”¨\n\t                textareaElement.value = textNode\n\t              }\n\t            }\n\t          })\n\t          .exec()\n\t      })\n\t      .exec()\n\t    \n\t    // å¦‚æœæ²¡æ³•è·å–åˆ°æ­£ç¡®ä½ç½®ï¼Œè¿”å›ä¸€ä¸ªä¼°è®¡å€¼\n\t    return Math.min(text.length, Math.max(0, selectionStart.value))\n\t  } catch (e) {\n\t    console.error('å…‰æ ‡ä½ç½®è®¡ç®—å¤±è´¥:', e)\n\t    return 0 // å¤±è´¥æ—¶è¿”å›å¼€å§‹ä½ç½®\n\t  }\n\t}\n\n\t// æ‰“å¼€æ–‡æœ¬ç²¾ç¡®é€‰æ‹©æ¨¡å¼\n\tconst openPreciseTextSelection = () => {\n\t  try {\n\t    // ä½¿ç”¨å¾®ä¿¡å°ç¨‹åº/uniæä¾›çš„å¯èƒ½API\n\t    uni.showActionSheet({\n\t      itemList: ['ç²¾ç¡®é€‰æ‹©æ–‡æœ¬'],\n\t      success: () => {\n\t        // å¯ç”¨ç²¾ç¡®é€‰æ‹©æ¨¡å¼\n\t        uni.showToast({\n\t          title: 'å·²å¯ç”¨ç²¾ç¡®é€‰æ‹©',\n\t          icon: 'none',\n\t          duration: 1500\n\t        })\n\t        \n\t        // è®¾ç½®ç³»ç»Ÿé€‰æ‹©æ¨¡å¼ä¸ºå¯é€‰æ‹©\n\t        setTimeout(() => {\n\t          textareaFocus.value = true\n\t          \n\t          // ä½¿ç”¨æ›´ä¸“ä¸šçš„æ–¹æ³•è®¾ç½®å…‰æ ‡å¯é€‰æ‹©æ¨¡å¼\n\t          if (typeof plus !== 'undefined' && plus.webview) {\n\t            const currentWebview = plus.webview.currentWebview()\n\t            if (currentWebview.setStyle) {\n\t              currentWebview.setStyle({\n\t                softinputMode: 'adjustResize', // ç¡®ä¿è½¯é”®ç›˜ä¸é®æŒ¡\n\t                userSelect: 'text' // å…è®¸ç”¨æˆ·é€‰æ‹©æ–‡æœ¬\n\t              })\n\t            }\n\t          }\n\t        }, 100)\n\t      }\n\t    })\n\t  } catch (e) {\n\t    console.error('æ— æ³•å¯ç”¨ç²¾ç¡®æ–‡æœ¬é€‰æ‹©:', e)\n\t    // å›é€€åˆ°åŸºæœ¬é€‰æ‹©æ–¹å¼\n\t    textareaFocus.value = true\n\t  }\n\t}\n\n\t// è®°å½•æ–‡æœ¬åŒºåŸŸä½ç½®çš„å“åº”å¼å˜é‡\n\tconst textAreaRect = ref({ left: 0, top: 0, width: 0, height: 0 })\n\n\t// æ·»åŠ å›¾ç‰‡é¢„è§ˆæ–¹æ³•ï¼Œä½¿ç”¨åŸŸåä¿®å¤\n\tconst previewImage = (index) => {\n\t\tif (!imageList.value[index]) return\n\t\t\n\t\t// ä½¿ç”¨åŸŸåä¿®å¤å‡½æ•°å¤„ç†å›¾ç‰‡URL\n\t\tconst images = imageList.value.map(img => fixImageUrl(img.thumbnailURL))\n\t\tpreviewImageIndex.value = index\n\t\t\n\t\t// ä½¿ç”¨uni-appçš„é¢„è§ˆå›¾ç‰‡API\n\t\tuni.previewImage({\n\t\t\tcurrent: index,\n\t\t\turls: images,\n\t\t\tindicator: 'number',\n\t\t\tloop: true,\n\t\t\tsuccess: () => {\n\t\t\t\tconsole.log('å›¾ç‰‡é¢„è§ˆæˆåŠŸ')\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.error('å›¾ç‰‡é¢„è§ˆå¤±è´¥', err)\n\t\t\t\t// é¢„è§ˆå¤±è´¥æ—¶çš„å¤‡é€‰æ–¹æ¡ˆï¼Œä½¿ç”¨åŸŸåä¿®å¤\n\t\t\t\tshowImagePreview.value = true\n\t\t\t\tcurrentPreviewImage.value = fixImageUrl(images[index])\n\t\t\t}\n\t\t})\n\t}\n\t\n\t\n\t\t\n\t// å…³é—­å›¾ç‰‡é¢„è§ˆ\n\tconst closeImagePreview = () => {\n\t\tshowImagePreview.value = false\n\t\tcurrentPreviewImage.value = ''\n\t}\n</script>\n\n<template>\n\t<view class=\"add\">\n\n\t\t<!-- åˆ†ç±»é€‰æ‹© -->\n\t\t<view class=\"category\">\n\t\t\t<view class=\"category-header\">\n\t\t\t\t<text class=\"label\">æ‰€å±åœ°åŒº</text>\n\t\t\t\t<text class=\"location-address-inline\" v-if=\"locationInfo && locationInfo.address\">ï¼ˆ{{ getSimplifiedAddress(locationInfo.address) }}ï¼‰</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<picker @change=\"bindPickerChange\" :range=\"categoryList\" :value=\"cateIndex\"\n\t\t\t\trange-key=\"cate_name\" v-if=\"false\">\n\t\t\t\t<view class=\"picker\">\n\t\t\t\t\t<text>\n\t\t\t\t\t\t{{categoryList[cateIndex]?.cate_name}}\n\t\t\t\t\t</text>\n\t\t\t\t\t<uni-icons type=\"bottom\" size=\"14\" color=\"#999999\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</picker>\n\t\t\t\n\t\t\t<!-- æ·»åŠ ç½‘æ ¼å¸ƒå±€çš„åˆ†ç±»é€‰æ‹© -->\n\t\t\t<view class=\"category-grid\">\n\t\t\t\t<!-- ç”Ÿæˆå›¾æ ‡æŒ‰é’®ï¼Œä»…åœ¨å½“å‰é€‰æ‹©çš„åˆ†ç±»æ²¡æœ‰ç¼©ç•¥å›¾æ—¶æ˜¾ç¤º -->\n\t\t\t\t<view \n\t\t\t\t\tv-if=\"categoryList.length > 0 && categoryList[cateIndex] && !categoryList[cateIndex].cate_img_thumbnail\" \n\t\t\t\t\tclass=\"category-item generate-icon-item\" \n\t\t\t\t\t@click=\"createNewCategoryIcon\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"category-icon\">\n\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"30\" color=\"#2196F3\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"category-name-container\">\n\t\t\t\t\t\t<text class=\"category-name\">ç”Ÿæˆå›¾æ ‡</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(item, index) in categoryList\" \n\t\t\t\t\t:key=\"index\" \n\t\t\t\t\tclass=\"category-item\" \n\t\t\t\t\t:class=\"{ 'active': index === cateIndex, 'location-based': item.is_location_based }\"\n\t\t\t\t\t@click=\"selectCategory(index)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"category-icon\">\n\t\t\t\t\t\t<!-- ä½¿ç”¨åˆ†ç±»å›¾æ ‡ï¼Œåº”ç”¨åŸŸåä¿®å¤ -->\n\t\t\t\t\t\t<image :src=\"fixImageUrl(item.icon)\" mode=\"aspectFit\" class=\"category-image\"></image>\n\t\t\t\t\t\t<!-- é€‰ä¸­çŠ¶æ€æŒ‡ç¤ºå™¨ -->\n\t\t\t\t\t\t<view class=\"selected-indicator\" v-if=\"index === cateIndex\">\n\t\t\t\t\t\t\t<uni-icons type=\"checkmarkempty\" size=\"16\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"category-name-container\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- ä¿®æ”¹ä½ç½®æ ‡è®°ï¼Œç§»é™¤å›¾æ ‡åªæ˜¾ç¤ºæ–‡æœ¬ -->\n\t\t\t\t\t\t<view class=\"location-badge\" v-if=\"item.is_location_based\">\n\t\t\t\t\t\t\t<!-- ç§»é™¤å›¾æ ‡ -->\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"category-name\">{{ item.cate_name }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- æ·»åŠ é‡è¯•æŒ‰é’® -->\n\t\t\t<view v-if=\"categoryList.length === 0 || categoryList[0]._id === 'default'\" \n\t\t\t\t  class=\"retry-btn\" @click=\"retryGetCategories\">\n\t\t\t\t<uni-icons type=\"refresh\" size=\"16\" color=\"#ff6600\"></uni-icons>\n\t\t\t\t<text class=\"retry-text\">é‡è¯•</text>\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\n\t\t<!-- ä¼˜åŒ–æ–‡æœ¬è¾“å…¥åŒºåŸŸ -->\n\t\t<view class=\"content-wrapper\">\n\t\t\t<view class=\"content-area\" :style=\"{ minHeight: inputHeight + 'rpx' }\">\n\t\t\t\t\n\t\t\t\t<textarea \n\t\t\t\t\tv-model=\"content\" \n\t\t\t\t\tplaceholder=\"åˆ†äº«æ–°é²œäº‹...\" \n\t\t\t\t\tclass=\"content-input\"\n\t\t\t\t\tmaxlength=\"2000\"\n\t\t\t\t\tauto-height\n\t\t\t\t\t:adjust-position=\"false\"\n\t\t\t\t\tshow-confirm-bar=\"false\"\n\t\t\t\t\tconfirm-type=\"done\"\n\t\t\t\t\tcursor-spacing=\"120\"\n\t\t\t\t\t:focus=\"textareaFocus\"\n\t\t\t\t\tref=\"contentTextarea\"\n\t\t\t\t\t@blur=\"textareaFocus = false\"\n\t\t\t\t\t@focus=\"handleTextareaFocus\"\n\t\t\t\t\t:disable-default-padding=\"true\"\n\t\t\t\t\t:hold-keyboard=\"false\"\n\t\t\t\t\t:selection-start=\"selectionStart\"\n\t\t\t\t\t:selection-end=\"selectionEnd\"\n\t\t\t\t\t@confirm=\"() => {}\"\n\t\t\t\t\t@linechange=\"handleLineChange\"\n\t\t\t\t\t@input=\"handleLineChange\"\n\t\t\t\t\t@selectionchange=\"handleSelectionChange\"\n\t\t\t\t\t@longpress=\"enablePreciseSelection\"\n\t\t\t\t\t@touchstart=\"enhanceTextareaSelection\"\n\t\t\t\t\t@click=\"enhanceTextareaSelection\"\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<!-- åº•éƒ¨å­—æ•°ç»Ÿè®¡å’ŒåŠŸèƒ½æŒ‰é’® -->\n\t\t\t\t<view class=\"content-footer\">\n\t\t\t\t\t<text class=\"word-count\">{{ content.length }}/2000</text>\n\t\t\t\t\t\n\t\t\t\t\t<!-- æ–‡æœ¬æ“ä½œå·¥å…·æ  -->\n\t\t\t\t\t<view class=\"text-toolbar\">\n\t\t\t\t\t\t<view class=\"toolbar-btn\" @click=\"enablePreciseSelection\">\n\t\t\t\t\t\t\t<uni-icons type=\"more-filled\" size=\"16\" color=\"#666\"></uni-icons>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- ä¿®æ”¹åª’ä½“ä¸Šä¼ åŒºåŸŸ -->\n\t\t<view class=\"media-section\">\n\t\t\t<!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\n\t\t\t<view class=\"images\">\n\t\t\t\t\n\t\t\t\t<view class=\"image-list\">\n\t\t\t\t\t<view v-for=\"(image, index) in imageList\" :key=\"index\" class=\"image-item\">\n\t\t\t\t\t\t<image :src=\"fixImageUrl(image.thumbnailURL)\" mode=\"aspectFill\" @click=\"previewImage(index)\" />\n\t\t\t\t\t\t<view class=\"delete-btn\" @click=\"deleteImage(index)\">\n\t\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"progress-overlay\" v-if=\"image.progress < 100\">\n\t\t\t\t\t\t\t<view class=\"progress-text\">{{image.progress.toFixed(0)}}%</view>\n\t\t\t\t\t\t\t<view class=\"progress-bar\">\n\t\t\t\t\t\t\t\t<view class=\"progress\" :style=\"{width: image.progress + '%'}\"></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseAndUploadImage\">\n\t\t\t\t\t\t<uni-icons type=\"plusempty\" size=\"30\" color=\"#999\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"tip\">å¯æ— é™ä¸Šä¼ å›¾ç‰‡ï¼Œç‚¹å‡»å›¾ç‰‡å¯æ”¾å¤§æŸ¥çœ‹</text>\n\t\t\t</view>\n\n\t\t\t<!-- è§†é¢‘é“¾æ¥åŒºåŸŸ -->\n\t\t\t<view class=\"video\">\n\t\t\t\t<view v-if=\"videoInfo\" class=\"video-link-preview\">\n\t\t\t\t\t<view class=\"link-container\">\n\t\t\t\t\t\t<text class=\"link-text\">{{videoInfo}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"delete-btn\" @click=\"deleteVideo\">\n\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-else class=\"video-link-input\">\n\t\t\t\t\t<view class=\"input-container\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tv-model=\"videoLink\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tplaceholder=\"è¾“å…¥è§†é¢‘é“¾æ¥åè‡ªåŠ¨ä¿å­˜\" \n\t\t\t\t\t\t\tclass=\"link-input\"\n\t\t\t\t\t\t\tconfirm-type=\"done\"\n\t\t\t\t\t\t\tmaxlength=\"5000\"\n\t\t\t\t\t\t\t@input=\"handleVideoLinkInput\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"tip\">è¾“å…¥.mp4æ ¼å¼çš„é“¾æ¥ï¼Œåœ¨è¯¦æƒ…é¡µæ˜¾ç¤ºè§†é¢‘</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- å‘å¸ƒæŒ‰é’® -->\n\t\t<view class=\"publish\">\n\t\t\t<button class=\"publish-btn\" @click=\"submitForm\">{{isEditMode ? 'æ›´æ–°' : 'å‘å¸ƒ'}}</button>\n\t\t</view>\n\n\t\t<!-- å›¾æ ‡è‡ªå®šä¹‰é¢æ¿ -->\n\t\t<view class=\"icon-customize-overlay\" v-if=\"iconCustomizing\">\n\t\t\t<view class=\"icon-customize-panel\">\n\t\t\t\t<view class=\"icon-customize-header\">\n\t\t\t\t\t<text class=\"panel-title\">è°ƒæ•´å›¾æ ‡</text>\n\t\t\t\t\t<view class=\"close-btn\" @click=\"cancelCustomize\">\n\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#666\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"icon-preview\">\n\t\t\t\t\t<image :src=\"fixImageUrl(previewImageUrl)\" mode=\"aspectFit\" class=\"preview-image\"></image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"customize-controls\">\n\t\t\t\t\t<!-- æ–‡å­—Xè½´ä½ç½®è°ƒæ•´ -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">æ°´å¹³ä½ç½®</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textOffsetX + 50\" \n\t\t\t\t\t\t\tmin=\"0\" \n\t\t\t\t\t\t\tmax=\"100\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textOffsetX = e.detail.value - 50; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- æ–‡å­—Yè½´ä½ç½®è°ƒæ•´ -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">å‚ç›´ä½ç½®</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textOffsetY + 50\" \n\t\t\t\t\t\t\tmin=\"0\" \n\t\t\t\t\t\t\tmax=\"100\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textOffsetY = e.detail.value - 50; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- æ–‡å­—å¤§å°è°ƒæ•´ -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">æ–‡å­—å¤§å°</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textSize\" \n\t\t\t\t\t\t\tmin=\"50\" \n\t\t\t\t\t\t\tmax=\"150\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textSize = e.detail.value; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"customize-buttons\">\n\t\t\t\t\t<button class=\"cancel-btn\" @click=\"cancelCustomize\">å–æ¶ˆ</button>\n\t\t\t\t\t<button class=\"save-btn\" @click=\"saveCustomIcon\">ä¿å­˜</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- è¡¨æƒ…ç¬¦å·é¢æ¿ -->\n\t\t<view class=\"emoji-panel\" v-if=\"showEmojiPanel\">\n\t\t\t<view class=\"emoji-header\">\n\t\t\t\t<text class=\"emoji-title\">æ’å…¥è¡¨æƒ…</text>\n\t\t\t\t<view class=\"emoji-close\" @click=\"showEmojiPanel = false\">\n\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#666\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"emoji-tabs\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(group, index) in emojiGroups\" \n\t\t\t\t\t:key=\"index\" \n\t\t\t\t\tclass=\"emoji-tab\" \n\t\t\t\t\t:class=\"{'active': currentEmojiGroupIndex === index}\"\n\t\t\t\t\t@click=\"selectEmojiGroup(index)\"\n\t\t\t\t>\n\t\t\t\t\t{{ group.name }}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"emoji-content\">\n\t\t\t\t<view class=\"emoji-list\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tv-for=\"emoji in emojiGroups[currentEmojiGroupIndex].emojis\" \n\t\t\t\t\t\t:key=\"emoji\" \n\t\t\t\t\t\tclass=\"emoji-item\"\n\t\t\t\t\t\t@click.stop=\"insertEmoji(emoji)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ emoji }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- æ·»åŠ å›¾ç‰‡é¢„è§ˆå¼¹çª— (å¤‡ç”¨æ–¹æ¡ˆ) -->\n\t\t<view class=\"image-preview-overlay\" v-if=\"showImagePreview\" @click=\"closeImagePreview\">\n\t\t\t<view class=\"image-preview-container\" @click.stop>\n\t\t\t\t<image :src=\"fixImageUrl(currentPreviewImage)\" mode=\"widthFix\" class=\"preview-image\" />\n\t\t\t\t<view class=\"preview-close\" @click=\"closeImagePreview\">\n\t\t\t\t\t<uni-icons type=\"close\" size=\"24\" color=\"#fff\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.add {\n\t\tmin-height: 100vh;\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #fff;\n\n\t\t// ä½ç½®ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸæ ·å¼\n\t\t// å·²ç§»é™¤ä½ç½®ä¿¡æ¯æ˜¾ç¤ºç›¸å…³æ ·å¼\n\n\t\t.category {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t.category-header {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tgap: 8rpx;\n\t\t\t}\n\n\t\t\t.label {\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: $pyq-text-color-body;\n\t\t\t}\n\t\t\t\n\t\t\t.location-address-inline {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #666;\n\t\t\t\tmargin-left: 8rpx;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tline-height: 1.3;\n\t\t\t}\n\n\t\t\t.picker {\n\t\t\t\tflex: 1;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tpadding: 16rpx 24rpx;\n\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\tborder-radius: 3rpx;\n\t\t\t}\n\t\t\t\n\t\t\t/* åˆ†ç±»ç½‘æ ¼å¸ƒå±€æ ·å¼ */\n\t\t\t.category-grid {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tmargin: 0 -10rpx;\n\t\t\t\tpadding: 10rpx 0;\n\t\t\t}\n\t\t\t\n\t\t\t.category-item {\n\t\t\t\twidth: 20%; /* æ¯è¡Œ5ä¸ª */\n\t\t\t\tpadding: 10rpx;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\n\t\t\t\t.category-icon {\n\t\t\t\t\twidth: 100rpx;\n\t\t\t\t\theight: 100rpx;\n\t\t\t\t\tbackground-color: #f8f8f8;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\tborder: 2rpx solid transparent;\n\t\t\t\t\ttransition: all 0.3s;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n\t\t\t\t\t\n\t\t\t\t\t.category-image {\n\t\t\t\t\t\twidth: 70%;\n\t\t\t\t\t\theight: 70%;\n\t\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.selected-indicator {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\twidth: 36rpx;\n\t\t\t\t\t\theight: 36rpx;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tborder-top-left-radius: 12rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.category-name-container {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\tgap: 4rpx;\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tline-height: 1.2;\n\t\t\t\t\t\theight: 2.4em;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.location-badge {\n\t\t\t\t\t\tmargin-left: 4rpx;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.uni-icons {\n\t\t\t\t\t\t\twidth: 16rpx;\n\t\t\t\t\t\t\theight: 16rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.active {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(255, 102, 0, 0.08);\n\t\t\t\t\t\tborder-color: $pyq-vi-color;\n\t\t\t\t\t\tbox-shadow: 0 6rpx 16rpx rgba(255, 102, 0, 0.25);\n\t\t\t\t\t\ttransform: translateY(-4rpx);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: $pyq-vi-color;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.location-based {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.05);\n\t\t\t\t\t\tborder: 2rpx dashed #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.active {\n\t\t\t\t\t\t.category-icon {\n\t\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.1);\n\t\t\t\t\t\t\tborder: 2rpx solid #2196F3;\n\t\t\t\t\t\t\tbox-shadow: 0 6rpx 16rpx rgba(33, 150, 243, 0.25);\n\t\t\t\t\t\t\ttransform: translateY(-4rpx);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.category-name {\n\t\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.generate-icon-item {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.05);\n\t\t\t\t\t\tborder: 2rpx dashed #2196F3;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\topacity: 0.7;\n\t\t\t\t\t\ttransform: scale(0.95);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// é‡è¯•æŒ‰é’®æ ·å¼\n\t\t.retry-btn {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tpadding: 20rpx;\n\t\t\tmargin-top: 20rpx;\n\t\t\tbackground-color: rgba(255, 102, 0, 0.08);\n\t\t\tborder-radius: 12rpx;\n\t\t\tborder: 1px dashed $pyq-vi-color;\n\n\t\t\t.retry-text {\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tcolor: $pyq-vi-color;\n\t\t\t\tmargin-left: 8rpx;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\t&:active {\n\t\t\t\tbackground-color: rgba(255, 102, 0, 0.15);\n\t\t\t\topacity: 0.8;\n\t\t\t}\n\t\t}\n\n\t\t.content-wrapper {\n\t\t\tposition: relative;\n\t\t\tmargin-bottom: 20rpx;\n\t\t}\n\n\t\t.format-toolbar {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbackground-color: #fff;\n\t\t\tborder-radius: 12rpx;\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n\t\t\tpadding: 20rpx;\n\t\t\tz-index: 100;\n\t\t\ttransform: translateY(-10rpx);\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t\ttransition: all 0.3s ease;\n\t\t\t\n\t\t\t&.format-toolbar-visible {\n\t\t\t\topacity: 1;\n\t\t\t\ttransform: translateY(0);\n\t\t\t\tpointer-events: auto;\n\t\t\t}\n\t\t\t\n\t\t\t.toolbar-section {\n\t\t\t\tpadding-bottom: 20rpx;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\tborder-bottom: 1px solid #f0f0f0;\n\t\t\t\t\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t\tpadding-bottom: 0;\n\t\t\t\t\tborder-bottom: none;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.toolbar-title {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #999;\n\t\t\t\tmargin-bottom: 12rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.format-actions {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 20rpx;\n\t\t\t\t\n\t\t\t\t.format-btn {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: #e0e0e0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.format-icon {\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\tmargin-bottom: 4rpx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.format-label {\n\t\t\t\t\t\tfont-size: 22rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.phrase-list {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tgap: 16rpx;\n\t\t\t\t\n\t\t\t\t.phrase-item {\n\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\tborder-radius: 30rpx;\n\t\t\t\t\tpadding: 8rpx 20rpx;\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: #e0e0e0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.clear-btn {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tbackground-color: rgba(255, 59, 48, 0.1);\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\tpadding: 12rpx;\n\t\t\t\t\n\t\t\t\ttext {\n\t\t\t\t\tcolor: #ff3b30;\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\tmargin-left: 8rpx;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&:active {\n\t\t\t\t\tbackground-color: rgba(255, 59, 48, 0.2);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.toolbar-close {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 12rpx;\n\t\t\t\tright: 12rpx;\n\t\t\t\twidth: 40rpx;\n\t\t\t\theight: 40rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\t\n\t\t\t\t&:active {\n\t\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.action-btns {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 20rpx;\n\t\t\t\t\n\t\t\t\t.action-btn {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tpadding: 16rpx;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t\n\t\t\t\t\ttext {\n\t\t\t\t\t\tmargin-left: 8rpx;\n\t\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.primary {\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\topacity: 0.8;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.danger {\n\t\t\t\t\t\tbackground-color: #ff3b30;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\topacity: 0.8;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.content-area {\n\t\t\tposition: relative;\n\t\t\tborder: 1px solid #e0e0e0;\n\t\t\tborder-radius: 12rpx;\n\t\t\tbackground-color: #fff;\n\t\t\tmin-height: 170rpx;\n\t\t\tmax-height: 800rpx;\n\t\t\tpadding: 0;\n\t\t\tbox-sizing: border-box;\n\t\t\toverflow: hidden;\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n\t\t\ttransition: height 0.2s ease-out;\n\t\t\t\n\t\t\t.content-input {\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 120rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tline-height: 1.5;\n\t\t\t\tcolor: #333;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tbackground-color: transparent;\n\t\t\t\tborder: none;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tword-break: break-word;\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t\toverflow-wrap: break-word;\n\t\t\t\ttext-align: left;\n\t\t\t\tuser-select: text;\n\t\t\t\tcaret-color: $pyq-vi-color;\n\t\t\t\tletter-spacing: 0.5px;\n\t\t\t\ttouch-action: manipulation;\n\t\t\t\t-webkit-user-select: text;\n\t\t\t\ttransition: all 0.2s ease-out;\n\t\t\t\tz-index: 1;\n\t\t\t\tposition: relative;\n\t\t\t\t\n\t\t\t\t&:focus {\n\t\t\t\t\toutline: none;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.content-footer {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 8rpx 16rpx;\n\t\t\t\tbackground-color: #f9f9f9;\n\t\t\t\tborder-top: 1px solid #eee;\n\t\t\t\t\n\t\t\t\t.word-count {\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #999;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.text-toolbar {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tgap: 20rpx;\n\t\t\t\t\t\n\t\t\t\t\t.toolbar-btn {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t// background-color: #f0f0f0;\n\t\t\t\t\t\tpadding: 6rpx 12rpx;\n\t\t\t\t\t\tborder-radius: 30rpx;\n\t\t\t\t\t\t\n\t\t\t\t\t\ttext {\n\t\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t\tmargin-left: 4rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\tbackground-color: #e0e0e0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t&:focus-within {\n\t\t\t\tborder-color: $pyq-vi-color;\n\t\t\t\tbox-shadow: 0 0 0 2px rgba($pyq-vi-color, 0.1);\n\t\t\t}\n\t\t}\n\n\t\t.media-section {\n\t\t\tmargin-bottom: 32rpx;\n\t\t}\n\n\t\t.images {\n\t\t\tmargin-bottom: 32rpx;\n\n\t\t\t.upload-notice {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground-color: rgba(33, 150, 243, 0.08);\n\t\t\t\tpadding: 12rpx 16rpx;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\n\t\t\t\ttext {\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\tmargin-left: 8rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.tip {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-top: 16rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: $pyq-text-color-helper;\n\t\t\t}\n\t\t}\n\n\t\t.video {\n\t\t\t.video-link-preview {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\toverflow: hidden;\n\n\t\t\t\t.link-container {\n\t\t\t\t\tpadding-right: 60rpx; // ä¸ºåˆ é™¤æŒ‰é’®ç•™å‡ºç©ºé—´\n\t\t\t\t\tword-break: break-all;\n\t\t\t\t}\n\n\t\t\t\t.link-text {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t}\n\n\t\t\t\t.delete-btn {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 15rpx;\n\t\t\t\t\tright: 15rpx;\n\t\t\t\t\tbackground: rgba(255, 0, 0, 0.7);\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tpadding: 8rpx;\n\t\t\t\t\tz-index: 10;\n\t\t\t\t\twidth: 40rpx;\n\t\t\t\t\theight: 40rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.video-link-input {\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\n\t\t\t\t.input-container {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\tpadding: 10rpx 20rpx;\n\t\t\t\t\t\n\t\t\t\t\t.link-input {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\theight: 70rpx;\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tpadding: 0 20rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.tip {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: $pyq-text-color-helper;\n\t\t\t}\n\t\t}\n\n\t\t.publish {\n\t\t\t.publish-btn {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 88rpx;\n\t\t\t\tline-height: 88rpx;\n\t\t\t\tbackground: linear-gradient(to right, $pyq-vi-color, rgba($pyq-vi-color, 0.6));\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tborder-radius: 44rpx;\n\n\t\t\t\t&:active {\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// å›¾æ ‡è‡ªå®šä¹‰é¢æ¿æ ·å¼\n\t\t.icon-customize-overlay {\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.6);\n\t\t\tz-index: 9999;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\t\n\t\t\t.icon-customize-panel {\n\t\t\t\twidth: 80%;\n\t\t\t\tmax-width: 600rpx;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tborder-radius: 20rpx;\n\t\t\t\tpadding: 30rpx;\n\t\t\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n\t\t\t\t\n\t\t\t\t.icon-customize-header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\t\t\n\t\t\t\t\t.panel-title {\n\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.close-btn {\n\t\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.icon-preview {\n\t\t\t\t\twidth: 200rpx;\n\t\t\t\t\theight: 200rpx;\n\t\t\t\t\tmargin: 0 auto 30rpx;\n\t\t\t\t\tborder: 1px solid #eee;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\n\t\t\t\t\t.preview-image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.customize-controls {\n\t\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\t\t\n\t\t\t\t\t.control-item {\n\t\t\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.control-label {\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.customize-buttons {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tgap: 20rpx;\n\t\t\t\t\t\n\t\t\t\t\tbutton {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\theight: 80rpx;\n\t\t\t\t\t\tline-height: 80rpx;\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tborder-radius: 40rpx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.cancel-btn {\n\t\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.save-btn {\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* ä¿®æ”¹ picker ç¡®è®¤æŒ‰é’®çš„é¢œè‰² */\n\t:deep(.uni-picker-container) {\n\t\t.uni-picker-action {\n\t\t\tcolor: $pyq-vi-color !important;\n\t\t}\n\t}\n\n\t/* ç§»é™¤æ–‡æœ¬é€‰æ‹©æ ·å¼çš„å…¨å±€æ ·å¼ - ä¼šå½±å“æ‰€æœ‰textarea */\n\t:deep(page) {\n\t\t/* å¾®ä¿¡å°ç¨‹åºæ–‡æœ¬é€‰æ‹©æ ·å¼ */\n\t\t/* stylelint-disable-next-line */\n\t\ttext::selection,\n\t\ttextarea::selection {\n\t\t\tbackground-color: rgba(255, 102, 0, 0.2) !important; /* æ›´æ˜æ˜¾çš„é€‰æ‹©èƒŒæ™¯è‰² */\n\t\t}\n\t}\n\n\t/* è¦†ç›–å°ç¨‹åºé»˜è®¤çš„é€‰ä¸­æ ·å¼ */\n\t.selecting {\n\t\t/* é’ˆå¯¹å¾®ä¿¡å°ç¨‹åºç‰¹å®šé€‰æ‹©æ ·å¼çš„è¦†ç›– */\n\t\tposition: relative;\n\t\tuser-select: auto;\n\t\t-webkit-user-select: auto; /* å¢åŠ WebKitæ”¯æŒ */\n\t\t\n\t\t&::before {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tpointer-events: none;\n\t\t\tz-index: 5;\n\t\t}\n\t}\n\t\n\t.image-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 20rpx;\n\t\t\n\t\t.image-item {\n\t\t\tposition: relative;\n\t\t\twidth: 200rpx;\n\t\t\theight: 200rpx;\n\t\t\t\n\t\t\timage {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t// æ·»åŠ æ ·å¼è¡¨æ˜å›¾ç‰‡å¯ç‚¹å‡»\n\t\t\t\t&:active {\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.delete-btn {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 15rpx;\n\t\t\t\tright: 15rpx;\n\t\t\t\tbackground: rgba(255, 0, 0, 0.7);\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tpadding: 8rpx;\n\t\t\t\tz-index: 10;\n\t\t\t\twidth: 40rpx;\n\t\t\t\theight: 40rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t}\n\n\t\t\t.progress-overlay {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tborder-radius: 8rpx;\n\n\t\t\t\t.progress-text {\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\ttext-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\t\t\t\t}\n\n\t\t\t\t.progress-bar {\n\t\t\t\t\twidth: 80%;\n\t\t\t\t\theight: 4rpx;\n\t\t\t\t\tbackground: rgba(255, 255, 255, 0.3);\n\t\t\t\t\tborder-radius: 2rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\n\t\t\t\t\t.progress {\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tbackground: linear-gradient(to right, #fff, #2196F3);\n\t\t\t\t\t\tborder-radius: 2rpx;\n\t\t\t\t\t\ttransition: width 0.3s ease;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.upload-btn {\n\t\t\twidth: 200rpx;\n\t\t\theight: 200rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tbackground-color: #f7f7f7;\n\t\t\tborder-radius: 8rpx;\n\t\t}\n\t}\n\n\t// æ·»åŠ è§†é¢‘è½¬æ¢ä¸­çš„åŠ¨ç”»æ ·å¼\n\t.converting-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-radius: 8rpx;\n\t\tz-index: 5;\n\t\t\n\t\t.converting-spinner {\n\t\t\twidth: 60rpx;\n\t\t\theight: 60rpx;\n\t\t\tborder: 4rpx solid rgba(255, 255, 255, 0.3);\n\t\t\tborder-top: 4rpx solid #fff;\n\t\t\tborder-radius: 50%;\n\t\t\tanimation: spin 1s linear infinite;\n\t\t\tmargin-bottom: 20rpx;\n\t\t}\n\t\t\n\t\t.converting-text {\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 28rpx;\n\t\t}\n\t}\n\n\t// æ·»åŠ æ—‹è½¬åŠ¨ç”»\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\n\t// ä¼˜åŒ–æ•´ä½“å¸ƒå±€\n\t.article-add {\n\t\tpadding: 20rpx 30rpx; // å‡å°æ•´ä½“å†…è¾¹è·\n\t\t\n\t\t.form-item {\n\t\t\tmargin-bottom: 20rpx; // å‡å°è¡¨å•é¡¹ä¹‹é—´çš„é—´è·\n\t\t}\n\t\t\n\t\t.section-title {\n\t\t\tfont-size: 28rpx; // å‡å°æ ‡é¢˜å­—ä½“å¤§å°\n\t\t\tmargin-bottom: 10rpx; // å‡å°æ ‡é¢˜åº•éƒ¨è¾¹è·\n\t\t}\n\t}\n\n\t/* æ·»åŠ å½“å‰ä»…æ˜¾ç¤ºæœ¬åœ°åˆ†ç±»çš„æç¤ºæ ·å¼ */\n\t.location-only-tip {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: rgba(33, 150, 243, 0.08);\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 8rpx;\n\t\tmargin-bottom: 16rpx;\n\t\t\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #2196F3;\n\t\t\tmargin-left: 8rpx;\n\t\t}\n\t}\n\n\t// è¡¨æƒ…ç¬¦å·é¢æ¿æ ·å¼\n\t.emoji-panel {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 20rpx 20rpx 0 0;\n\t\tpadding: 20rpx;\n\t\tbox-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.1);\n\t\tz-index: 999;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmax-height: 50vh;\n\t\t\n\t\t.emoji-header {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding-bottom: 16rpx;\n\t\t\tmargin-bottom: 16rpx;\n\t\t\tborder-bottom: 1px solid #f0f0f0;\n\t\t\t\n\t\t\t.emoji-title {\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t\n\t\t\t.emoji-close {\n\t\t\t\tpadding: 8rpx;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\n\t\t\t\t&:active {\n\t\t\t\t\tbackground-color: #e0e0e0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.emoji-tabs {\n\t\t\tdisplay: flex;\n\t\t\tborder-bottom: 1px solid #f0f0f0;\n\t\t\tmargin-bottom: 16rpx;\n\t\t\t\n\t\t\t.emoji-tab {\n\t\t\t\tpadding: 12rpx 24rpx;\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tcolor: #666;\n\t\t\t\t\n\t\t\t\t&.active {\n\t\t\t\t\tcolor: $pyq-vi-color;\n\t\t\t\t\tborder-bottom: 2px solid $pyq-vi-color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.emoji-content {\n\t\t\tflex: 1;\n\t\t\toverflow-y: auto;\n\t\t\t\n\t\t\t.emoji-list {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tpadding: 10rpx;\n\t\t\t\t\n\t\t\t\t.emoji-item {\n\t\t\t\t\twidth: 70rpx;\n\t\t\t\t\theight: 70rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tfont-size: 36rpx;\n\t\t\t\t\tmargin: 10rpx;\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// æ¨¡æ¿é¢æ¿æ ·å¼\n\t.template-panel {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.6);\n\t\tz-index: 999;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t\n\t\t.template-container {\n\t\t\twidth: 80%;\n\t\t\tmax-width: 600rpx;\n\t\t\tbackground-color: #fff;\n\t\t\tborder-radius: 12rpx;\n\t\t\toverflow: hidden;\n\t\t\tmax-height: 70vh;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t\n\t\t\t.template-header {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tbackground-color: #f9f9f9;\n\t\t\t\tborder-bottom: 1px solid #eee;\n\t\t\t\t\n\t\t\t\t.template-title {\n\t\t\t\t\tfont-size: 30rpx;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.close-btn {\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: #e0e0e0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.template-list {\n\t\t\t\tflex: 1;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\t\n\t\t\t\t.template-item {\n\t\t\t\t\tpadding: 16rpx;\n\t\t\t\t\tborder-radius: 12rpx;\n\t\t\t\t\tbackground-color: #f9f9f9;\n\t\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\tborder: 1px solid #eee;\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\tbackground-color: rgba($pyq-vi-color, 0.1);\n\t\t\t\t\t\tborder-color: rgba($pyq-vi-color, 0.3);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.template-item-header {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.template-item-title {\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.template-preview {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\tline-height: 1.4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// æ·»åŠ å›¾ç‰‡é¢„è§ˆæ ·å¼\n\t.image-preview-overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.9);\n\t\tz-index: 9999;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t\n\t\t.image-preview-container {\n\t\t\tposition: relative;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\t\n\t\t\t.preview-image {\n\t\t\t\tmax-width: 100%;\n\t\t\t\tmax-height: 100%;\n\t\t\t}\n\t\t\t\n\t\t\t.preview-close {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 40rpx;\n\t\t\t\tright: 40rpx;\n\t\t\t\twidth: 80rpx;\n\t\t\t\theight: 80rpx;\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t}\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'D:/ä»£ç æµ‹è¯•/wx2/pages/fabu/fabu.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserInfoStore","uniCloud","ref","computed","uni","getDefaultImage","fixImageUrl","onLoad","tempFilePath","onMounted","nextTick","res"],"mappings":"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"}